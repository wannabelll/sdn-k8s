apiVersion: v1
items:
- apiVersion: v1
  data:
    1-agent-process-metrics.json: |-
      {
        "__inputs": [
          {
            "name": "prometheus",
            "label": "prometheus",
            "description": "",
            "type": "datasource",
            "pluginId": "prometheus",
            "pluginName": "Prometheus"
          },
          {
            "name": "loki",
            "label": "loki",
            "description": "",
            "type": "datasource",
            "pluginId": "loki",
            "pluginName": "Loki"
          }
        ],
        "__elements": {},
        "__requires": [
          {
            "type": "panel",
            "id": "bargauge",
            "name": "Bar gauge",
            "version": ""
          },
          {
            "type": "panel",
            "id": "gauge",
            "name": "Gauge",
            "version": ""
          },
          {
            "type": "grafana",
            "id": "grafana",
            "name": "Grafana",
            "version": "9.3.6"
          },
          {
            "type": "datasource",
            "id": "loki",
            "name": "Loki",
            "version": "1.0.0"
          },
          {
            "type": "datasource",
            "id": "prometheus",
            "name": "Prometheus",
            "version": "1.0.0"
          },
          {
            "type": "panel",
            "id": "stat",
            "name": "Stat",
            "version": ""
          },
          {
            "type": "panel",
            "id": "timeseries",
            "name": "Time series",
            "version": ""
          }
        ],
        "annotations": {
          "list": [
            {
              "builtIn": 1,
              "datasource": {
                "type": "grafana",
                "uid": "-- Grafana --"
              },
              "enable": true,
              "hide": true,
              "iconColor": "rgba(0, 211, 255, 1)",
              "name": "Annotations & Alerts",
              "target": {
                "limit": 100,
                "matchAny": false,
                "tags": [],
                "type": "dashboard"
              },
              "type": "dashboard"
            }
          ]
        },
        "editable": true,
        "fiscalYearStartMonth": 0,
        "graphTooltip": 0,
        "id": null,
        "links": [
          {
            "asDropdown": false,
            "icon": "external link",
            "includeVars": true,
            "keepTime": true,
            "tags": [
              "antrea_v1.10"
            ],
            "targetBlank": true,
            "title": "New link",
            "tooltip": "",
            "type": "dashboards",
            "url": ""
          }
        ],
        "liveNow": false,
        "panels": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 6,
              "x": 0,
              "y": 0
            },
            "id": 12,
            "options": {
              "displayMode": "basic",
              "minVizHeight": 10,
              "minVizWidth": 0,
              "orientation": "horizontal",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showUnfilled": true
            },
            "pluginVersion": "9.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "antrea_agent_local_pod_count{instance=~\"^$instance.*\"}",
                "legendFormat": "{{instance}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Antrea Managed Pods by Instance",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(.*);.*",
                  "renamePattern": "$1"
                }
              }
            ],
            "type": "bargauge"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fieldConfig": {
              "defaults": {
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 3,
              "x": 6,
              "y": 0
            },
            "id": 13,
            "options": {
              "colorMode": "value",
              "graphMode": "area",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "9.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "sum(antrea_agent_local_pod_count{instance=~\"^$instance.*\"})",
                "legendFormat": "{{instance}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Total Pods",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(.*);.*",
                  "renamePattern": "$1"
                }
              }
            ],
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "Total user and system CPU time spent in seconds.",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 25,
                  "gradientMode": "hue",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "smooth",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 15,
              "x": 9,
              "y": 0
            },
            "id": 3,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "irate(process_cpu_seconds_total{instance=~\"^$instance.*\"}[1m])  * 100",
                "hide": false,
                "legendFormat": "{{instance}}",
                "range": true,
                "refId": "B"
              }
            ],
            "title": "CPU Usage per Antrea Process",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(.*);(.*)",
                  "renamePattern": "$1"
                }
              }
            ],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "Total user and system CPU time spent in seconds.",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 25,
                  "gradientMode": "hue",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "smooth",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 8
            },
            "id": 14,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "irate(process_cpu_seconds_total{instance=~\".*6443$\"} [1m]) * 100",
                "hide": false,
                "legendFormat": "min {{instance}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Kubernetes API Server CPU Usage",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(.*) (.*);(.*)",
                  "renamePattern": "$1 $2"
                }
              }
            ],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "Resident memory size in bytes.",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 25,
                  "gradientMode": "hue",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 8
            },
            "id": 10,
            "options": {
              "legend": {
                "calcs": [
                  "max",
                  "mean"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "9.3.1",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "process_resident_memory_bytes{instance=~\".*6443$\"}",
                "hide": false,
                "legendFormat": "resident memory @ {{instance}}",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "process_virtual_memory_bytes{instance=~\".*6443$\"}",
                "hide": false,
                "legendFormat": "virtual memory @ {{instance}}",
                "range": true,
                "refId": "B"
              }
            ],
            "title": "Kubernetes API Server Resident and Memory Status ",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(.*);(.*)",
                  "renamePattern": "$1"
                }
              }
            ],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "Virtual memory size in bytes.",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 25,
                  "gradientMode": "hue",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "decbytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 9,
              "w": 12,
              "x": 0,
              "y": 16
            },
            "id": 8,
            "options": {
              "legend": {
                "calcs": [
                  "max",
                  "mean"
                ],
                "displayMode": "table",
                "placement": "right",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "9.3.1",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "process_virtual_memory_bytes{instance=~\"^$instance.*\"}",
                "hide": false,
                "legendFormat": "{{instance}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Virtual Memory Status",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(.*);(.*)",
                  "renamePattern": "$1"
                }
              }
            ],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "Resident memory size in bytes.",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 25,
                  "gradientMode": "hue",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 9,
              "w": 12,
              "x": 12,
              "y": 16
            },
            "id": 15,
            "options": {
              "legend": {
                "calcs": [
                  "max",
                  "mean"
                ],
                "displayMode": "table",
                "placement": "right",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "9.3.1",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "process_resident_memory_bytes{instance=~\"^$instance.*\"}",
                "hide": false,
                "legendFormat": "{{instance}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Resident Memory Status",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(.*);(.*)",
                  "renamePattern": "$1"
                }
              }
            ],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-YlBl"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "logs per second",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "scheme",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "smooth",
                  "lineWidth": 1,
                  "pointSize": 4,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 9,
              "w": 12,
              "x": 0,
              "y": 25
            },
            "id": 7,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "mean",
                  "max"
                ],
                "displayMode": "table",
                "placement": "right",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "9.3.1",
            "targets": [
              {
                "datasource": {
                  "type": "loki",
                  "uid": "loki"
                },
                "editorMode": "code",
                "expr": "sum by (log_level) (rate({job=\"fluentbit-antrea\", nodename=~\"$instance\", agent_log_category=~\"$log_category\", log_level=~\"$log_level\"} [1m]))",
                "hide": false,
                "legendFormat": "{{log_level}} {{category}} ",
                "queryType": "range",
                "refId": "C"
              }
            ],
            "title": "Antrea Logs per Second",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(^W)(.*)",
                  "renamePattern": "WARNING $2"
                }
              },
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(^E)(.*)",
                  "renamePattern": "ERROR $2"
                }
              },
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(^I)(.*)",
                  "renamePattern": "INFO $2"
                }
              }
            ],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "Open File Descriptors",
            "fieldConfig": {
              "defaults": {
                "mappings": [],
                "thresholds": {
                  "mode": "percentage",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "orange",
                      "value": 70
                    },
                    {
                      "color": "red",
                      "value": 85
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 9,
              "w": 12,
              "x": 12,
              "y": 25
            },
            "id": 9,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": false,
              "showThresholdMarkers": false
            },
            "pluginVersion": "9.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "process_open_fds{instance=~\"^$instance.*\"}",
                "hide": false,
                "legendFormat": "{{instance}}",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "avg(process_max_fds{instance=~\"^$instance.*\"})\n",
                "hide": false,
                "legendFormat": "Max FDs",
                "range": true,
                "refId": "B"
              }
            ],
            "title": "Open File Descriptors",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(.*);.*controller.*",
                  "renamePattern": "controller @ $1"
                }
              },
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(.*);.*agent.*",
                  "renamePattern": "agent @ $1"
                }
              }
            ],
            "type": "gauge"
          }
        ],
        "refresh": false,
        "schemaVersion": 37,
        "style": "dark",
        "tags": [
          "antrea_v1.10"
        ],
        "templating": {
          "list": [
            {
              "current": {},
              "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
              },
              "definition": "up{job=\"antrea-agents\"}",
              "hide": 0,
              "includeAll": true,
              "multi": true,
              "name": "instance",
              "options": [],
              "query": {
                "query": "up{job=\"antrea-agents\"}",
                "refId": "StandardVariableQuery"
              },
              "refresh": 1,
              "regex": ".*instance=\"(.*?);.*",
              "skipUrlSync": false,
              "sort": 0,
              "type": "query"
            },
            {
              "current": {},
              "datasource": {
                "type": "loki",
                "uid": "loki"
              },
              "definition": "",
              "hide": 0,
              "includeAll": true,
              "multi": true,
              "name": "log_category",
              "options": [],
              "query": {
                "label": "agent_log_category",
                "refId": "LokiVariableQueryEditor-VariableQuery",
                "stream": "",
                "type": 1
              },
              "refresh": 1,
              "regex": "",
              "skipUrlSync": false,
              "sort": 0,
              "type": "query"
            },
            {
              "current": {},
              "datasource": {
                "type": "loki",
                "uid": "loki"
              },
              "definition": "",
              "hide": 0,
              "includeAll": true,
              "multi": true,
              "name": "log_level",
              "options": [],
              "query": {
                "label": "log_level",
                "refId": "LokiVariableQueryEditor-VariableQuery",
                "stream": "",
                "type": 1
              },
              "refresh": 1,
              "regex": "",
              "skipUrlSync": false,
              "sort": 0,
              "type": "query"
            }
          ]
        },
        "time": {
          "from": "now-1h",
          "to": "now"
        },
        "timepicker": {},
        "timezone": "",
        "title": "1.- Agent Process Metrics",
        "uid": "VHGCKFAVk",
        "version": 8,
        "weekStart": ""
      }
  kind: ConfigMap
  metadata:
    labels:
      grafana_dashboard: "1"
    name: 1-agent-process-metrics-dashboard-cm
    namespace: observability
- apiVersion: v1
  data:
    2-agent-ovs-metrics-and-logs.json: |-
      {
        "__inputs": [
          {
            "name": "prometheus",
            "label": "prometheus",
            "description": "",
            "type": "datasource",
            "pluginId": "prometheus",
            "pluginName": "Prometheus"
          },
          {
            "name": "loki",
            "label": "loki",
            "description": "",
            "type": "datasource",
            "pluginId": "loki",
            "pluginName": "Loki"
          }
        ],
        "__elements": {},
        "__requires": [
          {
            "type": "grafana",
            "id": "grafana",
            "name": "Grafana",
            "version": "9.3.6"
          },
          {
            "type": "panel",
            "id": "logs",
            "name": "Logs",
            "version": ""
          },
          {
            "type": "datasource",
            "id": "loki",
            "name": "Loki",
            "version": "1.0.0"
          },
          {
            "type": "datasource",
            "id": "prometheus",
            "name": "Prometheus",
            "version": "1.0.0"
          },
          {
            "type": "panel",
            "id": "text",
            "name": "Text",
            "version": ""
          },
          {
            "type": "panel",
            "id": "timeseries",
            "name": "Time series",
            "version": ""
          }
        ],
        "annotations": {
          "list": [
            {
              "builtIn": 1,
              "datasource": {
                "type": "grafana",
                "uid": "-- Grafana --"
              },
              "enable": true,
              "hide": true,
              "iconColor": "rgba(0, 211, 255, 1)",
              "name": "Annotations & Alerts",
              "target": {
                "limit": 100,
                "matchAny": false,
                "tags": [],
                "type": "dashboard"
              },
              "type": "dashboard"
            }
          ]
        },
        "description": "",
        "editable": true,
        "fiscalYearStartMonth": 0,
        "graphTooltip": 0,
        "id": null,
        "links": [
          {
            "asDropdown": false,
            "icon": "external link",
            "includeVars": true,
            "keepTime": true,
            "tags": [
              "antrea_v1.10"
            ],
            "targetBlank": true,
            "title": "Antrea Dashboards",
            "tooltip": "",
            "type": "dashboards",
            "url": ""
          }
        ],
        "liveNow": false,
        "panels": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "gridPos": {
              "h": 16,
              "w": 4,
              "x": 0,
              "y": 0
            },
            "id": 6,
            "options": {
              "code": {
                "language": "plaintext",
                "showLineNumbers": false,
                "showMiniMap": false
              },
              "content": "0=PipelineRootClassifier\n1=ARPSpoofGuard\n2=ARPResponder\n3=Classifier\n4=SpoofGuard\n5=UnSNAT\n7=ConntrackZone\n8=PreRoutingClassifier\n9=SessionAffinity\n10=ServiceLB\n11=EndpointDNAT\n12=AntreaPolicyEgressRule\n13=EgressRule\n14=EgressDefaultRule\n15=EgressMetric\n16=L3Forwarding\n17=EgressMark\n18=L3DecTTL\n19=SNATMark\n20=SNAT\n21=L2ForwardingCalc\n22=TrafficControl\n23=IngressSecurityClassifier\n24=AntreaPolicyIngressRule\n25=IngressRule\n26=IngressDefaultRule\n27=IngressMetric\n28=ConntrackCommit\n29=Output",
              "mode": "code"
            },
            "pluginVersion": "9.3.6",
            "title": "OVS Table Names",
            "type": "text"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "Flow count for each OVS flow table. The TableID is used as a label.\nPolicyEgressRule = 45\nEgressRule = 50\nL3Forwarrding = 70\nSNATTable=71",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "OVS Flows",
                  "axisPlacement": "left",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 25,
                  "gradientMode": "hue",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [
                  {
                    "options": {
                      "pattern": "(.*)-.*",
                      "result": {
                        "index": 0,
                        "text": "$1"
                      }
                    },
                    "type": "regex"
                  }
                ],
                "thresholds": {
                  "mode": "percentage",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 20,
              "x": 4,
              "y": 0
            },
            "id": 2,
            "links": [
              {
                "targetBlank": true,
                "title": "Antrea OVS Pipeline",
                "url": "https://antrea.io/docs/v1.7.0/docs/assets/ovs-pipeline-antrea-proxy.svg"
              }
            ],
            "options": {
              "legend": {
                "calcs": [
                  "max",
                  "mean"
                ],
                "displayMode": "table",
                "placement": "right",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "desc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": false,
                "expr": "antrea_agent_ovs_flow_count{instance=~\"^$instance.*\", table_id=~'${ovs_table:regex}'}",
                "format": "time_series",
                "instant": false,
                "legendFormat": "table {{table_id}} {{instance}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Agent OVS Flow Count",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(.*);.*",
                  "renamePattern": "$1"
                }
              }
            ],
            "transparent": true,
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "Flow count for each OVS flow table. The TableID is used as a label.\nPolicyEgressRule = 45\nEgressRule = 50\nL3Forwarrding = 70\nSNATTable=71",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "OVS entries",
                  "axisPlacement": "left",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 25,
                  "gradientMode": "hue",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [
                  {
                    "options": {
                      "pattern": "(.*)-.*",
                      "result": {
                        "index": 0,
                        "text": "$1"
                      }
                    },
                    "type": "regex"
                  }
                ],
                "thresholds": {
                  "mode": "percentage",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 10,
              "x": 4,
              "y": 8
            },
            "id": 10,
            "links": [
              {
                "targetBlank": true,
                "title": "Antrea OVS Pipeline",
                "url": "https://antrea.io/docs/v1.7.0/docs/assets/ovs-pipeline-antrea-proxy.svg"
              }
            ],
            "options": {
              "legend": {
                "calcs": [
                  "max",
                  "mean"
                ],
                "displayMode": "table",
                "placement": "right",
                "showLegend": true,
                "sortBy": "Mean",
                "sortDesc": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "desc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": false,
                "expr": "sum (antrea_agent_ovs_flow_count{instance=~\"^$instance.*\", table_id=~'${ovs_table:regex}'}) by (instance)",
                "format": "time_series",
                "instant": false,
                "legendFormat": "entries @ {{instance}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Sum of OVS Entries by Node",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(.*);.*",
                  "renamePattern": "$1"
                }
              }
            ],
            "transparent": true,
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "Flow count for each OVS flow table. The TableID is used as a label.\nPolicyEgressRule = 45\nEgressRule = 50\nL3Forwarrding = 70\nSNATTable=71",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "OVS entries",
                  "axisPlacement": "left",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 25,
                  "gradientMode": "hue",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [
                  {
                    "options": {
                      "pattern": "(.*)-.*",
                      "result": {
                        "index": 0,
                        "text": "$1"
                      }
                    },
                    "type": "regex"
                  }
                ],
                "thresholds": {
                  "mode": "percentage",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 10,
              "x": 14,
              "y": 8
            },
            "id": 8,
            "links": [
              {
                "targetBlank": true,
                "title": "Antrea OVS Pipeline",
                "url": "https://antrea.io/docs/v1.7.0/docs/assets/ovs-pipeline-antrea-proxy.svg"
              }
            ],
            "options": {
              "legend": {
                "calcs": [
                  "max",
                  "mean"
                ],
                "displayMode": "table",
                "placement": "right",
                "showLegend": true,
                "sortBy": "Mean",
                "sortDesc": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "desc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": false,
                "expr": "sum (antrea_agent_ovs_flow_count{instance=~\"^$instance.*\", table_id=~'${ovs_table:regex}'}) by (table_id)",
                "format": "time_series",
                "instant": false,
                "legendFormat": "table {{table_id}} {{instance}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Sum of OVS Entries by TableID",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(.*);.*",
                  "renamePattern": "$1"
                }
              }
            ],
            "transparent": true,
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "Number of OVS flow operations, partitioned by operation type (add, modify and delete).",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "ops per second",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "bars",
                  "fillOpacity": 100,
                  "gradientMode": "opacity",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 11,
              "w": 8,
              "x": 0,
              "y": 16
            },
            "id": 12,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": false,
                "expr": "sum(rate(antrea_agent_ovs_flow_ops_count{instance=~\"^$instance.*\", operation=~\"$operation\"}[1m])) by (instance) * 60",
                "format": "time_series",
                "instant": false,
                "legendFormat": "{{instance}}  {{operation}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "OVS Flow Operations by instance",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(.*);(.*)\\s(.*)",
                  "renamePattern": "$1 $3"
                }
              }
            ],
            "transparent": true,
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "Number of OVS flow operations, partitioned by operation type (add, modify and delete).",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "ops per second",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "bars",
                  "fillOpacity": 100,
                  "gradientMode": "opacity",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 11,
              "w": 8,
              "x": 8,
              "y": 16
            },
            "id": 14,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "min",
                  "mean",
                  "max"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "showLegend": true,
                "sortBy": "Mean",
                "sortDesc": false
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": false,
                "expr": "sum(rate(antrea_agent_ovs_flow_ops_count{instance=~\"^$instance.*\", operation=~\"$operation\"}[1m])) by (operation) * 60",
                "format": "time_series",
                "instant": false,
                "legendFormat": "{{instance}}  {{operation}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "OVS Flow Operations by operation type",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(.*);(.*)\\s(.*)",
                  "renamePattern": "$1 $3"
                }
              }
            ],
            "transparent": true,
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "errors per second",
                  "axisPlacement": "left",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 5,
                  "gradientMode": "hue",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "smooth",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [
                  {
                    "options": {
                      "pattern": "(.*)-.*",
                      "result": {
                        "index": 0,
                        "text": "$1"
                      }
                    },
                    "type": "regex"
                  }
                ],
                "thresholds": {
                  "mode": "percentage",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 11,
              "w": 8,
              "x": 16,
              "y": 16
            },
            "id": 16,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "desc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": false,
                "expr": "rate(antrea_agent_ovs_flow_ops_error_count{instance=~\"$instance.*\"}[1m]) *60",
                "format": "time_series",
                "instant": false,
                "legendFormat": "{{instance}}  {{operation}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Flow Operation Errors",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(.*);(.*)\\s(.*)",
                  "renamePattern": "$1 $3"
                }
              }
            ],
            "transparent": true,
            "type": "timeseries"
          },
          {
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 27
            },
            "id": 29,
            "title": "OVS Logs Analysis",
            "type": "row"
          },
          {
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "description": "",
            "gridPos": {
              "h": 9,
              "w": 16,
              "x": 0,
              "y": 28
            },
            "id": 18,
            "options": {
              "dedupStrategy": "exact",
              "enableLogDetails": true,
              "prettifyLogMessage": true,
              "showCommonLabels": false,
              "showLabels": false,
              "showTime": false,
              "sortOrder": "Descending",
              "wrapLogMessage": false
            },
            "targets": [
              {
                "datasource": {
                  "type": "loki",
                  "uid": "loki"
                },
                "editorMode": "code",
                "expr": "{job=\"fluentbit-antrea-ovs\",ovs_category=~\"$ovs_category\",ovs_log_level=~\"$ovs_log_level\", nodename=~\"$instance\"} |  json | line_format \"{{.date}} at node {{.nodename}} with level {{.ovs_log_level}} from subsystem {{.ovs_category}} with message: {{.message}}\"",
                "hide": false,
                "queryType": "range",
                "refId": "A"
              }
            ],
            "title": "OpenvSwitch Logs",
            "type": "logs"
          },
          {
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "events per second",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "points",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "smooth",
                  "lineWidth": 1,
                  "pointSize": 4,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 9,
              "w": 8,
              "x": 16,
              "y": 28
            },
            "id": 20,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.3.1",
            "targets": [
              {
                "datasource": {
                  "type": "loki",
                  "uid": "loki"
                },
                "editorMode": "code",
                "expr": "sum(rate({job=\"fluentbit-antrea-ovs\", nodename=~\"$instance\", ovs_category=~\"$ovs_category\", ovs_log_level=~\"$ovs_log_level\"} [1m])) by (ovs_log_level)",
                "hide": false,
                "legendFormat": "{{ovs_log_level}} {{ovs_category}} ",
                "queryType": "range",
                "refId": "C"
              }
            ],
            "title": "OVS  Events per Second",
            "transformations": [],
            "type": "timeseries"
          }
        ],
        "schemaVersion": 37,
        "style": "dark",
        "tags": [
          "antrea_v1.10"
        ],
        "templating": {
          "list": [
            {
              "current": {},
              "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
              },
              "definition": "up{job=\"antrea-agents\"}",
              "hide": 0,
              "includeAll": true,
              "multi": true,
              "name": "instance",
              "options": [],
              "query": {
                "query": "up{job=\"antrea-agents\"}",
                "refId": "StandardVariableQuery"
              },
              "refresh": 1,
              "regex": ".*instance=\"(.*?);.*",
              "skipUrlSync": false,
              "sort": 0,
              "type": "query"
            },
            {
              "current": {},
              "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
              },
              "definition": "antrea_agent_ovs_flow_count",
              "hide": 0,
              "includeAll": true,
              "multi": true,
              "name": "ovs_table",
              "options": [],
              "query": {
                "query": "antrea_agent_ovs_flow_count",
                "refId": "StandardVariableQuery"
              },
              "refresh": 1,
              "regex": ".*table_id=\"(.*?)\".*",
              "skipUrlSync": false,
              "sort": 3,
              "type": "query"
            },
            {
              "current": {},
              "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
              },
              "definition": "antrea_agent_ovs_flow_ops_count",
              "hide": 0,
              "includeAll": true,
              "multi": true,
              "name": "operation",
              "options": [],
              "query": {
                "query": "antrea_agent_ovs_flow_ops_count",
                "refId": "StandardVariableQuery"
              },
              "refresh": 1,
              "regex": ".*operation=\"(.*?)\".*",
              "skipUrlSync": false,
              "sort": 1,
              "type": "query"
            },
            {
              "current": {},
              "datasource": {
                "type": "loki",
                "uid": "loki"
              },
              "definition": "",
              "hide": 0,
              "includeAll": true,
              "multi": true,
              "name": "ovs_log_level",
              "options": [],
              "query": {
                "label": "ovs_log_level",
                "refId": "LokiVariableQueryEditor-VariableQuery",
                "stream": "",
                "type": 1
              },
              "refresh": 1,
              "regex": "",
              "skipUrlSync": false,
              "sort": 0,
              "type": "query"
            },
            {
              "current": {},
              "datasource": {
                "type": "loki",
                "uid": "loki"
              },
              "definition": "",
              "hide": 0,
              "includeAll": true,
              "multi": true,
              "name": "ovs_category",
              "options": [],
              "query": {
                "label": "ovs_category",
                "refId": "LokiVariableQueryEditor-VariableQuery",
                "stream": "",
                "type": 1
              },
              "refresh": 1,
              "regex": "",
              "skipUrlSync": false,
              "sort": 0,
              "type": "query"
            },
            {
              "current": {},
              "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
              },
              "definition": "antrea_proxy_total_endpoints_installed",
              "hide": 0,
              "includeAll": true,
              "multi": true,
              "name": "ip_family",
              "options": [],
              "query": {
                "query": "antrea_proxy_total_endpoints_installed",
                "refId": "StandardVariableQuery"
              },
              "refresh": 1,
              "regex": ".*ip_family=\"(.*?)\".*",
              "skipUrlSync": false,
              "sort": 0,
              "type": "query"
            }
          ]
        },
        "time": {
          "from": "now-1h",
          "to": "now"
        },
        "timepicker": {},
        "timezone": "",
        "title": "2.- Agent OVS Metrics and logs",
        "uid": "hyB3KF04z",
        "version": 12,
        "weekStart": ""
      }
  kind: ConfigMap
  metadata:
    labels:
      grafana_dashboard: "1"
    name: 2-agent-ovs-metrics-and-logs-dashboard-cm
    namespace: observability
- apiVersion: v1
  data:
    3-agent-conntrack-and-proxy-metrics.json: |-
      {
        "__inputs": [
          {
            "name": "prometheus",
            "label": "prometheus",
            "description": "",
            "type": "datasource",
            "pluginId": "prometheus",
            "pluginName": "Prometheus"
          }
        ],
        "__elements": {},
        "__requires": [
          {
            "type": "grafana",
            "id": "grafana",
            "name": "Grafana",
            "version": "9.3.6"
          },
          {
            "type": "datasource",
            "id": "prometheus",
            "name": "Prometheus",
            "version": "1.0.0"
          },
          {
            "type": "panel",
            "id": "stat",
            "name": "Stat",
            "version": ""
          },
          {
            "type": "panel",
            "id": "timeseries",
            "name": "Time series",
            "version": ""
          }
        ],
        "annotations": {
          "list": [
            {
              "builtIn": 1,
              "datasource": {
                "type": "grafana",
                "uid": "-- Grafana --"
              },
              "enable": true,
              "hide": true,
              "iconColor": "rgba(0, 211, 255, 1)",
              "name": "Annotations & Alerts",
              "target": {
                "limit": 100,
                "matchAny": false,
                "tags": [],
                "type": "dashboard"
              },
              "type": "dashboard"
            }
          ]
        },
        "editable": true,
        "fiscalYearStartMonth": 0,
        "graphTooltip": 0,
        "id": null,
        "links": [
          {
            "asDropdown": false,
            "icon": "external link",
            "includeVars": true,
            "keepTime": true,
            "tags": [
              "antrea_v1.10"
            ],
            "targetBlank": true,
            "title": "Antrea Dashboards",
            "tooltip": "",
            "type": "dashboards",
            "url": ""
          }
        ],
        "liveNow": false,
        "panels": [
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 0
            },
            "id": 16,
            "panels": [],
            "title": "Conntrack Section",
            "type": "row"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "antrea_agent_conntrack_total_connection_count: Number of connections in the conntrack table. This metric gets updated at an interval specified by flowPollInterval, a configuration parameter for the Agent.\n\nantrea_agent_conntrack_antrea_connection_count: Number of connections in the Antrea ZoneID of the conntrack table. This metric gets updated at an interval specified by flowPollInterval, a configuration parameter for the Agent.\n\nantrea_agent_conntrack_max_connection_count: Size of the conntrack table. This metric gets updated at an interval specified by flowPollInterval, a configuration parameter for the Agent.",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "connections",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 33,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "dashed"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 10,
              "w": 24,
              "x": 0,
              "y": 1
            },
            "id": 2,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "mean",
                  "max"
                ],
                "displayMode": "table",
                "placement": "right",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "antrea_agent_conntrack_antrea_connection_count{instance=~\"^$instance.*\"}",
                "legendFormat": "__auto",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Antrea ZoneID Conntrack Connection Count",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": ".*antrea_agent_(.*)_connection_count(.*)instance=\"(.*);(.*)",
                  "renamePattern": "$1 @ $3"
                }
              }
            ],
            "transparent": true,
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "antrea_agent_conntrack_total_connection_count: Number of connections in the conntrack table. This metric gets updated at an interval specified by flowPollInterval, a configuration parameter for the Agent.\n\nantrea_agent_conntrack_antrea_connection_count: Number of connections in the Antrea ZoneID of the conntrack table. This metric gets updated at an interval specified by flowPollInterval, a configuration parameter for the Agent.\n\nantrea_agent_conntrack_max_connection_count: Size of the conntrack table. This metric gets updated at an interval specified by flowPollInterval, a configuration parameter for the Agent.",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-BlYlRd"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "connections",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 25,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "dashed"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/.*_max.*/"
                  },
                  "properties": [
                    {
                      "id": "custom.lineWidth",
                      "value": 3
                    },
                    {
                      "id": "custom.fillOpacity",
                      "value": 0
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 8,
              "w": 23,
              "x": 0,
              "y": 11
            },
            "id": 6,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "mean",
                  "max"
                ],
                "displayMode": "table",
                "placement": "right",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "(antrea_agent_conntrack_total_connection_count{instance=~\"^$instance.*\"}/antrea_agent_conntrack_max_connection_count{instance=~\"^$instance.*\"})*100",
                "hide": false,
                "legendFormat": "__auto",
                "range": true,
                "refId": "B"
              }
            ],
            "title": "CT Total Connection vs Maximum Percentage",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": ".*instance=\"(.*);(.*)",
                  "renamePattern": "$1"
                }
              }
            ],
            "transparent": true,
            "type": "timeseries"
          },
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 19
            },
            "id": 14,
            "panels": [],
            "title": "Proxy and Endpoints Section",
            "type": "row"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "updates per second",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 25,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 10,
              "w": 15,
              "x": 0,
              "y": 20
            },
            "id": 8,
            "options": {
              "legend": {
                "calcs": [
                  "last",
                  "min",
                  "max",
                  "mean"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "avg(irate(antrea_proxy_total_endpoints_updates{job=\"antrea-agents\", instance=~\"^$instance.*\"} [$__interval]))",
                "hide": false,
                "legendFormat": "__auto",
                "range": true,
                "refId": "C"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "avg(irate(antrea_proxy_total_services_updates{job=\"antrea-agents\", instance=~\"^$instance.*\"} [$__interval]))",
                "hide": false,
                "legendFormat": "__auto",
                "range": true,
                "refId": "D"
              }
            ],
            "title": "Proxy Endpoints vs Service Updates rate",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": ".*irate\\(antrea_(.*){.*",
                  "renamePattern": "$1"
                }
              }
            ],
            "transparent": true,
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-GrYlRd"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 10,
              "w": 9,
              "x": 15,
              "y": 20
            },
            "id": 10,
            "options": {
              "colorMode": "value",
              "graphMode": "area",
              "justifyMode": "center",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "9.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "antrea_proxy_total_endpoints_installed {job=\"antrea-agents\", instance=~\"^$instance.*\", ip_family=~\"$ip_family\"}",
                "hide": false,
                "legendFormat": "__auto",
                "range": true,
                "refId": "C"
              }
            ],
            "title": "Proxy Endpoints Installed by Node",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": ".*instance=\"(.*);.*ip_family=\"(.*)\",.*",
                  "renamePattern": "$1 ip$2"
                }
              }
            ],
            "transparent": true,
            "type": "stat"
          }
        ],
        "refresh": false,
        "schemaVersion": 37,
        "style": "dark",
        "tags": [
          "antrea_v1.10"
        ],
        "templating": {
          "list": [
            {
              "current": {},
              "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
              },
              "definition": "up{job=\"antrea-agents\"}",
              "hide": 0,
              "includeAll": true,
              "multi": true,
              "name": "instance",
              "options": [],
              "query": {
                "query": "up{job=\"antrea-agents\"}",
                "refId": "StandardVariableQuery"
              },
              "refresh": 1,
              "regex": ".*instance=\"(.*?);.*",
              "skipUrlSync": false,
              "sort": 0,
              "type": "query"
            },
            {
              "current": {},
              "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
              },
              "definition": "antrea_proxy_total_endpoints_installed",
              "hide": 0,
              "includeAll": true,
              "label": "",
              "multi": true,
              "name": "ip_family",
              "options": [],
              "query": {
                "query": "antrea_proxy_total_endpoints_installed",
                "refId": "StandardVariableQuery"
              },
              "refresh": 1,
              "regex": ".*ip_family=\"(.*?)\".*",
              "skipUrlSync": false,
              "sort": 0,
              "type": "query"
            }
          ]
        },
        "time": {
          "from": "now-5m",
          "to": "now"
        },
        "timepicker": {},
        "timezone": "",
        "title": "3.-  Agent Conntrack and Proxy Metrics",
        "uid": "0oZR5K0Vk",
        "version": 16,
        "weekStart": ""
      }
  kind: ConfigMap
  metadata:
    labels:
      grafana_dashboard: "1"
    name: 3-agent-conntrack-and-proxy-metrics-dashboard-cm
    namespace: observability
- apiVersion: v1
  data:
    4-agent-network-policy-metrics-and-logs.json: "{\n  \"annotations\": {\n    \"list\":
      [\n      {\n        \"builtIn\": 1,\n        \"datasource\": {\n          \"type\":
      \"grafana\",\n          \"uid\": \"-- Grafana --\"\n        },\n        \"enable\":
      true,\n        \"hide\": true,\n        \"iconColor\": \"rgba(0, 211, 255, 1)\",\n
      \       \"name\": \"Annotations & Alerts\",\n        \"target\": {\n          \"limit\":
      100,\n          \"matchAny\": false,\n          \"tags\": [],\n          \"type\":
      \"dashboard\"\n        },\n        \"type\": \"dashboard\"\n      }\n    ]\n
      \ },\n  \"editable\": true,\n  \"fiscalYearStartMonth\": 0,\n  \"graphTooltip\":
      0,\n  \"links\": [\n    {\n      \"asDropdown\": false,\n      \"icon\": \"external
      link\",\n      \"includeVars\": true,\n      \"keepTime\": true,\n      \"tags\":
      [],\n      \"targetBlank\": true,\n      \"title\": \"Antrea Dashboards\",\n
      \     \"tooltip\": \"\",\n      \"type\": \"dashboards\",\n      \"url\": \"\"\n
      \   }\n  ],\n  \"liveNow\": false,\n  \"panels\": [\n    {\n      \"datasource\":
      {\n        \"type\": \"prometheus\",\n        \"uid\": \"prometheus\"\n      },\n
      \     \"description\": \"Number of NetworkPolicies on local Node which are managed
      by the Antrea Agent.\",\n      \"fieldConfig\": {\n        \"defaults\": {\n
      \         \"color\": {\n            \"mode\": \"continuous-YlBl\"\n          },\n
      \         \"mappings\": [],\n          \"thresholds\": {\n            \"mode\":
      \"absolute\",\n            \"steps\": [\n              {\n                \"color\":
      \"green\",\n                \"value\": null\n              },\n              {\n
      \               \"color\": \"red\",\n                \"value\": 80\n              }\n
      \           ]\n          },\n          \"unit\": \"short\"\n        },\n        \"overrides\":
      []\n      },\n      \"gridPos\": {\n        \"h\": 10,\n        \"w\": 8,\n
      \       \"x\": 0,\n        \"y\": 0\n      },\n      \"id\": 4,\n      \"options\":
      {\n        \"colorMode\": \"background\",\n        \"graphMode\": \"none\",\n
      \       \"justifyMode\": \"center\",\n        \"orientation\": \"auto\",\n        \"reduceOptions\":
      {\n          \"calcs\": [\n            \"lastNotNull\"\n          ],\n          \"fields\":
      \"\",\n          \"values\": false\n        },\n        \"textMode\": \"auto\"\n
      \     },\n      \"pluginVersion\": \"9.4.3\",\n      \"targets\": [\n        {\n
      \         \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\":
      \"prometheus\"\n          },\n          \"editorMode\": \"code\",\n          \"expr\":
      \"antrea_agent_networkpolicy_count{instance=~\\\"^$instance.*\\\"}\",\n          \"format\":
      \"time_series\",\n          \"legendFormat\": \"__auto\",\n          \"range\":
      true,\n          \"refId\": \"A\"\n        }\n      ],\n      \"title\": \"Network
      Policies by Node \",\n      \"transformations\": [\n        {\n          \"id\":
      \"renameByRegex\",\n          \"options\": {\n            \"regex\": \"(.*)instance=\\\"(.*);.*\",\n
      \           \"renamePattern\": \"$2\"\n          }\n        }\n      ],\n      \"type\":
      \"stat\"\n    },\n    {\n      \"datasource\": {\n        \"type\": \"prometheus\",\n
      \       \"uid\": \"prometheus\"\n      },\n      \"description\": \"Number of
      egress NetworkPolicy rules on local Node which are managed by the Antrea Agent.\",\n
      \     \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n
      \           \"mode\": \"continuous-BlPu\"\n          },\n          \"mappings\":
      [],\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\":
      [\n              {\n                \"color\": \"green\",\n                \"value\":
      null\n              },\n              {\n                \"color\": \"red\",\n
      \               \"value\": 80\n              }\n            ]\n          },\n
      \         \"unit\": \"short\"\n        },\n        \"overrides\": []\n      },\n
      \     \"gridPos\": {\n        \"h\": 5,\n        \"w\": 4,\n        \"x\": 8,\n
      \       \"y\": 0\n      },\n      \"id\": 5,\n      \"options\": {\n        \"colorMode\":
      \"value\",\n        \"graphMode\": \"area\",\n        \"justifyMode\": \"auto\",\n
      \       \"orientation\": \"auto\",\n        \"reduceOptions\": {\n          \"calcs\":
      [\n            \"lastNotNull\"\n          ],\n          \"fields\": \"\",\n
      \         \"values\": false\n        },\n        \"textMode\": \"auto\"\n      },\n
      \     \"pluginVersion\": \"9.4.3\",\n      \"targets\": [\n        {\n          \"datasource\":
      {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n
      \         },\n          \"editorMode\": \"code\",\n          \"expr\": \"sum(antrea_agent_egress_networkpolicy_rule_count{instance=~\\\"^$instance.*\\\"})\",\n
      \         \"format\": \"time_series\",\n          \"legendFormat\": \"__auto\",\n
      \         \"range\": true,\n          \"refId\": \"A\"\n        }\n      ],\n
      \     \"title\": \"Overall Egress Network Policies\",\n      \"transformations\":
      [\n        {\n          \"id\": \"renameByRegex\",\n          \"options\": {\n
      \           \"regex\": \"(.*)instance=\\\"(.*);.*\",\n            \"renamePattern\":
      \"$2\"\n          }\n        }\n      ],\n      \"type\": \"stat\"\n    },\n
      \   {\n      \"datasource\": {\n        \"type\": \"prometheus\",\n        \"uid\":
      \"prometheus\"\n      },\n      \"description\": \"Number of denied connections
      detected by Flow Exporter deny connections tracking. This metric gets updated
      when a flow is rejected/dropped by network policy.\",\n      \"fieldConfig\":
      {\n        \"defaults\": {\n          \"color\": {\n            \"mode\": \"palette-classic\"\n
      \         },\n          \"custom\": {\n            \"axisCenteredZero\": false,\n
      \           \"axisColorMode\": \"text\",\n            \"axisLabel\": \"Denied
      Packets\",\n            \"axisPlacement\": \"auto\",\n            \"barAlignment\":
      0,\n            \"drawStyle\": \"bars\",\n            \"fillOpacity\": 100,\n
      \           \"gradientMode\": \"hue\",\n            \"hideFrom\": {\n              \"legend\":
      false,\n              \"tooltip\": false,\n              \"viz\": false\n            },\n
      \           \"lineInterpolation\": \"linear\",\n            \"lineWidth\": 1,\n
      \           \"pointSize\": 5,\n            \"scaleDistribution\": {\n              \"type\":
      \"linear\"\n            },\n            \"showPoints\": \"never\",\n            \"spanNulls\":
      false,\n            \"stacking\": {\n              \"group\": \"A\",\n              \"mode\":
      \"normal\"\n            },\n            \"thresholdsStyle\": {\n              \"mode\":
      \"off\"\n            }\n          },\n          \"mappings\": [],\n          \"thresholds\":
      {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n
      \               \"color\": \"green\",\n                \"value\": null\n              },\n
      \             {\n                \"color\": \"red\",\n                \"value\":
      80\n              }\n            ]\n          }\n        },\n        \"overrides\":
      []\n      },\n      \"gridPos\": {\n        \"h\": 10,\n        \"w\": 11,\n
      \       \"x\": 12,\n        \"y\": 0\n      },\n      \"id\": 10,\n      \"options\":
      {\n        \"legend\": {\n          \"calcs\": [],\n          \"displayMode\":
      \"list\",\n          \"placement\": \"bottom\",\n          \"showLegend\": true\n
      \       },\n        \"tooltip\": {\n          \"mode\": \"multi\",\n          \"sort\":
      \"none\"\n        }\n      },\n      \"targets\": [\n        {\n          \"datasource\":
      {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n
      \         },\n          \"editorMode\": \"code\",\n          \"expr\": \"antrea_agent_denied_connection_count{instance=~\\\"^$instance.*\\\"}\",\n
      \         \"legendFormat\": \"__auto\",\n          \"range\": true,\n          \"refId\":
      \"A\"\n        }\n      ],\n      \"title\": \"Denied Connection Count by Node\",\n
      \     \"transformations\": [\n        {\n          \"id\": \"renameByRegex\",\n
      \         \"options\": {\n            \"regex\": \"(.*)instance=\\\"(.*);.*\",\n
      \           \"renamePattern\": \"$2\"\n          }\n        }\n      ],\n      \"type\":
      \"timeseries\"\n    },\n    {\n      \"datasource\": {\n        \"type\": \"prometheus\",\n
      \       \"uid\": \"prometheus\"\n      },\n      \"description\": \"Number of
      ingress NetworkPolicy rules on local Node which are managed by the Antrea Agent.\",\n
      \     \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n
      \           \"mode\": \"continuous-BlPu\"\n          },\n          \"mappings\":
      [],\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\":
      [\n              {\n                \"color\": \"green\",\n                \"value\":
      null\n              },\n              {\n                \"color\": \"red\",\n
      \               \"value\": 80\n              }\n            ]\n          },\n
      \         \"unit\": \"short\"\n        },\n        \"overrides\": []\n      },\n
      \     \"gridPos\": {\n        \"h\": 5,\n        \"w\": 4,\n        \"x\": 8,\n
      \       \"y\": 5\n      },\n      \"id\": 8,\n      \"options\": {\n        \"colorMode\":
      \"value\",\n        \"graphMode\": \"area\",\n        \"justifyMode\": \"auto\",\n
      \       \"orientation\": \"auto\",\n        \"reduceOptions\": {\n          \"calcs\":
      [\n            \"lastNotNull\"\n          ],\n          \"fields\": \"\",\n
      \         \"values\": false\n        },\n        \"textMode\": \"auto\"\n      },\n
      \     \"pluginVersion\": \"9.4.3\",\n      \"targets\": [\n        {\n          \"datasource\":
      {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n
      \         },\n          \"editorMode\": \"code\",\n          \"expr\": \"sum(antrea_agent_ingress_networkpolicy_rule_count{instance=~\\\"^$instance.*\\\"})\",\n
      \         \"format\": \"time_series\",\n          \"legendFormat\": \"__auto\",\n
      \         \"range\": true,\n          \"refId\": \"A\"\n        }\n      ],\n
      \     \"title\": \"Overall Ingress Network Policies\",\n      \"transformations\":
      [\n        {\n          \"id\": \"renameByRegex\",\n          \"options\": {\n
      \           \"regex\": \"(.*)instance=\\\"(.*);.*\",\n            \"renamePattern\":
      \"$2\"\n          }\n        }\n      ],\n      \"type\": \"stat\"\n    },\n
      \   {\n      \"datasource\": {\n        \"type\": \"loki\",\n        \"uid\":
      \"loki\"\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\":
      {\n            \"mode\": \"palette-classic\"\n          },\n          \"custom\":
      {\n            \"axisCenteredZero\": false,\n            \"axisColorMode\":
      \"text\",\n            \"axisLabel\": \"\",\n            \"axisPlacement\":
      \"auto\",\n            \"barAlignment\": 0,\n            \"drawStyle\": \"line\",\n
      \           \"fillOpacity\": 18,\n            \"gradientMode\": \"none\",\n
      \           \"hideFrom\": {\n              \"legend\": false,\n              \"tooltip\":
      false,\n              \"viz\": false\n            },\n            \"lineInterpolation\":
      \"smooth\",\n            \"lineStyle\": {\n              \"fill\": \"solid\"\n
      \           },\n            \"lineWidth\": 1,\n            \"pointSize\": 5,\n
      \           \"scaleDistribution\": {\n              \"type\": \"linear\"\n            },\n
      \           \"showPoints\": \"auto\",\n            \"spanNulls\": true,\n            \"stacking\":
      {\n              \"group\": \"A\",\n              \"mode\": \"normal\"\n            },\n
      \           \"thresholdsStyle\": {\n              \"mode\": \"off\"\n            }\n
      \         },\n          \"mappings\": [],\n          \"thresholds\": {\n            \"mode\":
      \"absolute\",\n            \"steps\": [\n              {\n                \"color\":
      \"green\",\n                \"value\": null\n              },\n              {\n
      \               \"color\": \"red\",\n                \"value\": 80\n              }\n
      \           ]\n          },\n          \"unit\": \"bytes\"\n        },\n        \"overrides\":
      []\n      },\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 12,\n
      \       \"x\": 0,\n        \"y\": 10\n      },\n      \"id\": 11,\n      \"options\":
      {\n        \"legend\": {\n          \"calcs\": [],\n          \"displayMode\":
      \"list\",\n          \"placement\": \"bottom\",\n          \"showLegend\": true\n
      \       },\n        \"tooltip\": {\n          \"mode\": \"multi\",\n          \"sort\":
      \"desc\"\n        }\n      },\n      \"targets\": [\n        {\n          \"datasource\":
      {\n            \"type\": \"loki\",\n            \"uid\": \"loki\"\n          },\n
      \         \"editorMode\": \"code\",\n          \"expr\": \"sum by (action) (sum_over_time({job=\\\"fluentbit-antrea-netpolicy\\\",
      action=~\\\"$action\\\"} | json | unwrap packetLength | __error__=\\\"\\\" |
      sourceIP =~\\\".*$sourceIP_filter\\\" and destinationIP =~\\\".*$destinationIP_filter\\\"
      [$__interval]))\\n\",\n          \"key\": \"Q-5d318bbe-e13a-4cae-b47f-136f27a234e2-0\",\n
      \         \"legendFormat\": \"{{action}}\",\n          \"queryType\": \"range\",\n
      \         \"refId\": \"A\"\n        }\n      ],\n      \"title\": \"Bytes Hitting
      Network Policy by Action\",\n      \"type\": \"timeseries\"\n    },\n    {\n
      \     \"datasource\": {\n        \"type\": \"loki\",\n        \"uid\": \"loki\"\n
      \     },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\":
      {\n            \"mode\": \"palette-classic\"\n          },\n          \"displayName\":
      \"${__series.name}\",\n          \"mappings\": [],\n          \"thresholds\":
      {\n            \"mode\": \"percentage\",\n            \"steps\": [\n              {\n
      \               \"color\": \"green\",\n                \"value\": null\n              },\n
      \             {\n                \"color\": \"orange\",\n                \"value\":
      70\n              },\n              {\n                \"color\": \"red\",\n
      \               \"value\": 85\n              }\n            ]\n          }\n
      \       },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\":
      8,\n        \"w\": 11,\n        \"x\": 12,\n        \"y\": 10\n      },\n      \"id\":
      12,\n      \"options\": {\n        \"orientation\": \"auto\",\n        \"reduceOptions\":
      {\n          \"calcs\": [\n            \"lastNotNull\"\n          ],\n          \"fields\":
      \"\",\n          \"values\": false\n        },\n        \"showThresholdLabels\":
      false,\n        \"showThresholdMarkers\": false\n      },\n      \"pluginVersion\":
      \"9.4.3\",\n      \"targets\": [\n        {\n          \"datasource\": {\n            \"type\":
      \"loki\",\n            \"uid\": \"loki\"\n          },\n          \"editorMode\":
      \"code\",\n          \"expr\": \"sum (count_over_time({job=\\\"fluentbit-antrea-netpolicy\\\",
      action=~\\\"$action\\\"} | sourceIP =~\\\".*$sourceIP_filter\\\" and destinationIP
      =~\\\".*$destinationIP_filter\\\"[$__range])) by (action)\\n\",\n          \"key\":
      \"Q-5d318bbe-e13a-4cae-b47f-136f27a234e2-0\",\n          \"legendFormat\": \"{{action}}\",\n
      \         \"queryType\": \"range\",\n          \"refId\": \"A\"\n        }\n
      \     ],\n      \"title\": \"Network Policy Hits by Action\",\n      \"type\":
      \"gauge\"\n    },\n    {\n      \"collapsed\": false,\n      \"gridPos\": {\n
      \       \"h\": 1,\n        \"w\": 24,\n        \"x\": 0,\n        \"y\": 18\n
      \     },\n      \"id\": 30,\n      \"panels\": [],\n      \"title\": \"Network
      Policies Log Analysis\",\n      \"type\": \"row\"\n    },\n    {\n      \"datasource\":
      {\n        \"type\": \"loki\",\n        \"uid\": \"loki\"\n      },\n      \"description\":
      \"\",\n      \"gridPos\": {\n        \"h\": 7,\n        \"w\": 23,\n        \"x\":
      0,\n        \"y\": 19\n      },\n      \"id\": 14,\n      \"options\": {\n        \"dedupStrategy\":
      \"exact\",\n        \"enableLogDetails\": true,\n        \"prettifyLogMessage\":
      true,\n        \"showCommonLabels\": false,\n        \"showLabels\": false,\n
      \       \"showTime\": true,\n        \"sortOrder\": \"Descending\",\n        \"wrapLogMessage\":
      false\n      },\n      \"targets\": [\n        {\n          \"datasource\":
      {\n            \"type\": \"loki\",\n            \"uid\": \"loki\"\n          },\n
      \         \"editorMode\": \"code\",\n          \"expr\": \"{job=\\\"fluentbit-antrea-netpolicy\\\",action=~\\\"$action\\\",
      nodename=~\\\"$instance\\\"} \\n|  json \\n|  line_format \\\"\U0001F6E1️ {{.action}}
      {{.protocol}} packet from Source:{{.sourceIP}}:{{.sourcePort}} to Destination:{{.destinationIP}}:{{.destinationPort}}
      hitting rule {{.ruleName}} with reference {{.antreaNativePolicyReference}} at
      node {{.nodename}}\\\" \\n| sourceIP =~\\\".*$sourceIP_filter\\\" and destinationIP
      =~\\\".*$destinationIP_filter\\\"\",\n          \"hide\": false,\n          \"queryType\":
      \"range\",\n          \"refId\": \"B\"\n        }\n      ],\n      \"title\":
      \"Antrea Network Policy Logs\",\n      \"type\": \"logs\"\n    },\n    {\n      \"collapsed\":
      false,\n      \"gridPos\": {\n        \"h\": 1,\n        \"w\": 24,\n        \"x\":
      0,\n        \"y\": 26\n      },\n      \"id\": 32,\n      \"panels\": [],\n
      \     \"title\": \"Allowed Traffic\",\n      \"type\": \"row\"\n    },\n    {\n
      \     \"datasource\": {\n        \"type\": \"loki\",\n        \"uid\": \"loki\"\n
      \     },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\":
      {\n            \"mode\": \"continuous-GrYlRd\"\n          },\n          \"displayName\":
      \"${__series.name}\",\n          \"mappings\": [],\n          \"thresholds\":
      {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n
      \               \"color\": \"green\"\n              },\n              {\n                \"color\":
      \"red\",\n                \"value\": 80\n              }\n            ]\n          }\n
      \       },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\":
      6,\n        \"w\": 12,\n        \"x\": 0,\n        \"y\": 27\n      },\n      \"id\":
      16,\n      \"options\": {\n        \"displayMode\": \"lcd\",\n        \"minVizHeight\":
      10,\n        \"minVizWidth\": 0,\n        \"orientation\": \"horizontal\",\n
      \       \"reduceOptions\": {\n          \"calcs\": [\n            \"lastNotNull\"\n
      \         ],\n          \"fields\": \"\",\n          \"values\": false\n        },\n
      \       \"showUnfilled\": true\n      },\n      \"pluginVersion\": \"9.4.3\",\n
      \     \"targets\": [\n        {\n          \"datasource\": {\n            \"type\":
      \"loki\",\n            \"uid\": \"loki\"\n          },\n          \"editorMode\":
      \"code\",\n          \"expr\": \"sum by(ruleName) (count_over_time({job=\\\"fluentbit-antrea-netpolicy\\\",
      action=\\\"Allow\\\"} | json | __error__=`` | sourceIP =~\\\".*$sourceIP_filter\\\"
      and destinationIP =~\\\".*$destinationIP_filter\\\" [$__range]))\",\n          \"hide\":
      false,\n          \"key\": \"Q-5d318bbe-e13a-4cae-b47f-136f27a234e2-0\",\n          \"legendFormat\":
      \"{{ruleName}}\",\n          \"queryType\": \"range\",\n          \"refId\":
      \"A\"\n        }\n      ],\n      \"title\": \"Top Allowed Rules Hits by Name\",\n
      \     \"transformations\": [],\n      \"type\": \"bargauge\"\n    },\n    {\n
      \     \"datasource\": {\n        \"type\": \"loki\",\n        \"uid\": \"loki\"\n
      \     },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\":
      {\n            \"mode\": \"continuous-GrYlRd\"\n          },\n          \"displayName\":
      \"${__series.name}\",\n          \"mappings\": [],\n          \"thresholds\":
      {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n
      \               \"color\": \"green\"\n              },\n              {\n                \"color\":
      \"red\",\n                \"value\": 80\n              }\n            ]\n          }\n
      \       },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\":
      5,\n        \"w\": 11,\n        \"x\": 12,\n        \"y\": 27\n      },\n      \"id\":
      25,\n      \"options\": {\n        \"displayMode\": \"gradient\",\n        \"minVizHeight\":
      10,\n        \"minVizWidth\": 0,\n        \"orientation\": \"horizontal\",\n
      \       \"reduceOptions\": {\n          \"calcs\": [\n            \"lastNotNull\"\n
      \         ],\n          \"fields\": \"\",\n          \"values\": false\n        },\n
      \       \"showUnfilled\": true\n      },\n      \"pluginVersion\": \"9.4.3\",\n
      \     \"targets\": [\n        {\n          \"datasource\": {\n            \"type\":
      \"loki\",\n            \"uid\": \"loki\"\n          },\n          \"editorMode\":
      \"code\",\n          \"expr\": \"topk(5, sum by(destinationIP) (count_over_time({job=\\\"fluentbit-antrea-netpolicy\\\",
      action=\\\"Allow\\\"} | json | __error__=`` | sourceIP =~\\\".*$sourceIP_filter\\\"
      and destinationIP =~\\\".*$destinationIP_filter\\\" [$__range])))\",\n          \"hide\":
      false,\n          \"key\": \"Q-5d318bbe-e13a-4cae-b47f-136f27a234e2-0\",\n          \"legendFormat\":
      \"{{destinationIP}}\",\n          \"queryType\": \"range\",\n          \"refId\":
      \"A\"\n        }\n      ],\n      \"title\": \"Top Allowed DestinationIP\",\n
      \     \"transformations\": [\n        {\n          \"id\": \"filterFieldsByName\",\n
      \         \"options\": {\n            \"include\": {\n              \"names\":
      [\n                \"Time\",\n                \"10.34.2.24\",\n                \"Value\"\n
      \             ]\n            }\n          }\n        }\n      ],\n      \"type\":
      \"bargauge\"\n    },\n    {\n      \"datasource\": {\n        \"type\": \"loki\",\n
      \       \"uid\": \"loki\"\n      },\n      \"fieldConfig\": {\n        \"defaults\":
      {\n          \"color\": {\n            \"mode\": \"continuous-GrYlRd\"\n          },\n
      \         \"displayName\": \"${__series.name}\",\n          \"mappings\": [],\n
      \         \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\":
      [\n              {\n                \"color\": \"green\"\n              },\n
      \             {\n                \"color\": \"red\",\n                \"value\":
      80\n              }\n            ]\n          }\n        },\n        \"overrides\":
      []\n      },\n      \"gridPos\": {\n        \"h\": 5,\n        \"w\": 11,\n
      \       \"x\": 12,\n        \"y\": 32\n      },\n      \"id\": 26,\n      \"options\":
      {\n        \"displayMode\": \"gradient\",\n        \"minVizHeight\": 10,\n        \"minVizWidth\":
      0,\n        \"orientation\": \"horizontal\",\n        \"reduceOptions\": {\n
      \         \"calcs\": [\n            \"lastNotNull\"\n          ],\n          \"fields\":
      \"\",\n          \"values\": false\n        },\n        \"showUnfilled\": true\n
      \     },\n      \"pluginVersion\": \"9.4.3\",\n      \"targets\": [\n        {\n
      \         \"datasource\": {\n            \"type\": \"loki\",\n            \"uid\":
      \"loki\"\n          },\n          \"editorMode\": \"code\",\n          \"expr\":
      \"topk(2, sum by (sourceIP) (count_over_time({job=\\\"fluentbit-antrea-netpolicy\\\",
      action=\\\"Allow\\\"} | json | __error__=`` | sourceIP =~\\\".*$sourceIP_filter\\\"
      and destinationIP =~\\\".*$destinationIP_filter\\\" [$__range])))\",\n          \"hide\":
      false,\n          \"key\": \"Q-5d318bbe-e13a-4cae-b47f-136f27a234e2-0\",\n          \"legendFormat\":
      \"{{sourceIP}}\",\n          \"queryType\": \"range\",\n          \"refId\":
      \"A\"\n        }\n      ],\n      \"title\": \"Top Allowed SourceIP\",\n      \"transformations\":
      [\n        {\n          \"id\": \"filterFieldsByName\",\n          \"options\":
      {\n            \"include\": {\n              \"names\": [\n                \"Time\",\n
      \               \"10.34.2.24\",\n                \"Value\"\n              ]\n
      \           }\n          }\n        }\n      ],\n      \"type\": \"bargauge\"\n
      \   },\n    {\n      \"datasource\": {\n        \"type\": \"loki\",\n        \"uid\":
      \"loki\"\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\":
      {\n            \"mode\": \"palette-classic\"\n          },\n          \"custom\":
      {\n            \"hideFrom\": {\n              \"legend\": false,\n              \"tooltip\":
      false,\n              \"viz\": false\n            }\n          },\n          \"mappings\":
      [],\n          \"unit\": \"hits\"\n        },\n        \"overrides\": []\n      },\n
      \     \"gridPos\": {\n        \"h\": 9,\n        \"w\": 12,\n        \"x\":
      0,\n        \"y\": 33\n      },\n      \"id\": 20,\n      \"options\": {\n        \"displayLabels\":
      [\n          \"percent\"\n        ],\n        \"legend\": {\n          \"displayMode\":
      \"list\",\n          \"placement\": \"right\",\n          \"showLegend\": true,\n
      \         \"values\": []\n        },\n        \"pieType\": \"donut\",\n        \"reduceOptions\":
      {\n          \"calcs\": [\n            \"lastNotNull\"\n          ],\n          \"fields\":
      \"\",\n          \"values\": false\n        },\n        \"tooltip\": {\n          \"mode\":
      \"single\",\n          \"sort\": \"none\"\n        }\n      },\n      \"pluginVersion\":
      \"9.3.1\",\n      \"targets\": [\n        {\n          \"datasource\": {\n            \"type\":
      \"loki\",\n            \"uid\": \"loki\"\n          },\n          \"editorMode\":
      \"code\",\n          \"expr\": \"sum by (destinationPort, protocol, action)
      (count_over_time({job=\\\"fluentbit-antrea-netpolicy\\\", action=\\\"Allow\\\"}
      | json | __error__=`` | sourceIP =~\\\".*$sourceIP_filter\\\" and destinationIP
      =~\\\".*$destinationIP_filter\\\" [$__range])) \",\n          \"hide\": false,\n
      \         \"key\": \"Q-5d318bbe-e13a-4cae-b47f-136f27a234e2-0\",\n          \"legendFormat\":
      \"{{destinationIP}}\",\n          \"queryType\": \"range\",\n          \"refId\":
      \"A\"\n        }\n      ],\n      \"title\": \"Allowed Services\",\n      \"transformations\":
      [\n        {\n          \"id\": \"renameByRegex\",\n          \"options\": {\n
      \           \"regex\": \".*action=\\\"(.*)\\\".*Port=\\\"(.*)\\\",.*\\\"(.*)\\\".*\",\n
      \           \"renamePattern\": \"$1 - $2 - $3\"\n          }\n        }\n      ],\n
      \     \"type\": \"piechart\"\n    },\n    {\n      \"datasource\": {\n        \"type\":
      \"loki\",\n        \"uid\": \"loki\"\n      },\n      \"fieldConfig\": {\n        \"defaults\":
      {\n          \"color\": {\n            \"mode\": \"continuous-GrYlRd\"\n          },\n
      \         \"displayName\": \"${__series.name}\",\n          \"mappings\": [],\n
      \         \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\":
      [\n              {\n                \"color\": \"green\"\n              },\n
      \             {\n                \"color\": \"red\",\n                \"value\":
      80\n              }\n            ]\n          }\n        },\n        \"overrides\":
      []\n      },\n      \"gridPos\": {\n        \"h\": 5,\n        \"w\": 11,\n
      \       \"x\": 12,\n        \"y\": 37\n      },\n      \"id\": 21,\n      \"options\":
      {\n        \"displayMode\": \"gradient\",\n        \"minVizHeight\": 10,\n        \"minVizWidth\":
      0,\n        \"orientation\": \"horizontal\",\n        \"reduceOptions\": {\n
      \         \"calcs\": [\n            \"lastNotNull\"\n          ],\n          \"fields\":
      \"\",\n          \"values\": false\n        },\n        \"showUnfilled\": true\n
      \     },\n      \"pluginVersion\": \"9.4.3\",\n      \"targets\": [\n        {\n
      \         \"datasource\": {\n            \"type\": \"loki\",\n            \"uid\":
      \"loki\"\n          },\n          \"editorMode\": \"code\",\n          \"expr\":
      \"topk(2, sum by(protocol, sourceIP, destinationIP, destinationPort) (count_over_time({job=\\\"fluentbit-antrea-netpolicy\\\",
      action=\\\"Allow\\\"} | json | __error__=`` | sourceIP =~\\\".*$sourceIP_filter\\\"
      and destinationIP =~\\\".*$destinationIP_filter\\\"[$__range])))\",\n          \"hide\":
      false,\n          \"key\": \"Q-5d318bbe-e13a-4cae-b47f-136f27a234e2-0\",\n          \"legendFormat\":
      \"{{sourceIP}} - {{destinationIP}} {{protocol}} {{destinationPort}}\",\n          \"queryType\":
      \"range\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"title\":
      \"Top Allowed Conversations\",\n      \"transformations\": [\n        {\n          \"id\":
      \"filterFieldsByName\",\n          \"options\": {\n            \"include\":
      {\n              \"names\": [\n                \"Time\",\n                \"10.34.2.24\",\n
      \               \"Value\"\n              ]\n            }\n          }\n        }\n
      \     ],\n      \"type\": \"bargauge\"\n    },\n    {\n      \"collapsed\":
      false,\n      \"gridPos\": {\n        \"h\": 1,\n        \"w\": 24,\n        \"x\":
      0,\n        \"y\": 42\n      },\n      \"id\": 34,\n      \"panels\": [],\n
      \     \"title\": \"Denied Traffic\",\n      \"type\": \"row\"\n    },\n    {\n
      \     \"datasource\": {\n        \"type\": \"loki\",\n        \"uid\": \"loki\"\n
      \     },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\":
      {\n            \"mode\": \"continuous-GrYlRd\"\n          },\n          \"displayName\":
      \"${__series.name}\",\n          \"mappings\": [],\n          \"thresholds\":
      {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n
      \               \"color\": \"green\"\n              },\n              {\n                \"color\":
      \"red\",\n                \"value\": 80\n              }\n            ]\n          }\n
      \       },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\":
      6,\n        \"w\": 12,\n        \"x\": 0,\n        \"y\": 43\n      },\n      \"id\":
      17,\n      \"options\": {\n        \"displayMode\": \"lcd\",\n        \"minVizHeight\":
      10,\n        \"minVizWidth\": 0,\n        \"orientation\": \"horizontal\",\n
      \       \"reduceOptions\": {\n          \"calcs\": [\n            \"lastNotNull\"\n
      \         ],\n          \"fields\": \"\",\n          \"values\": false\n        },\n
      \       \"showUnfilled\": true\n      },\n      \"pluginVersion\": \"9.4.3\",\n
      \     \"targets\": [\n        {\n          \"datasource\": {\n            \"type\":
      \"loki\",\n            \"uid\": \"loki\"\n          },\n          \"editorMode\":
      \"code\",\n          \"expr\": \"topk(2, sum by(ruleName) (count_over_time({job=\\\"fluentbit-antrea-netpolicy\\\",
      action=~\\\"Reject|Drop\\\"} | json | __error__=`` | sourceIP =~\\\".*$sourceIP_filter\\\"
      and destinationIP =~\\\".*$destinationIP_filter\\\" [$__range])))\",\n          \"hide\":
      false,\n          \"key\": \"Q-5d318bbe-e13a-4cae-b47f-136f27a234e2-0\",\n          \"legendFormat\":
      \"{{ruleName}}\",\n          \"queryType\": \"range\",\n          \"refId\":
      \"A\"\n        }\n      ],\n      \"title\": \"Top Denied Rules Hits by Name\",\n
      \     \"transformations\": [],\n      \"type\": \"bargauge\"\n    },\n    {\n
      \     \"datasource\": {\n        \"type\": \"loki\",\n        \"uid\": \"loki\"\n
      \     },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\":
      {\n            \"mode\": \"continuous-GrYlRd\"\n          },\n          \"displayName\":
      \"${__series.name}\",\n          \"mappings\": [],\n          \"thresholds\":
      {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n
      \               \"color\": \"green\"\n              },\n              {\n                \"color\":
      \"red\",\n                \"value\": 80\n              }\n            ]\n          }\n
      \       },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\":
      5,\n        \"w\": 11,\n        \"x\": 12,\n        \"y\": 43\n      },\n      \"id\":
      19,\n      \"options\": {\n        \"displayMode\": \"gradient\",\n        \"minVizHeight\":
      10,\n        \"minVizWidth\": 0,\n        \"orientation\": \"horizontal\",\n
      \       \"reduceOptions\": {\n          \"calcs\": [\n            \"lastNotNull\"\n
      \         ],\n          \"fields\": \"\",\n          \"values\": false\n        },\n
      \       \"showUnfilled\": true\n      },\n      \"pluginVersion\": \"9.4.3\",\n
      \     \"targets\": [\n        {\n          \"datasource\": {\n            \"type\":
      \"loki\",\n            \"uid\": \"loki\"\n          },\n          \"editorMode\":
      \"code\",\n          \"expr\": \"topk(2, sum by (sourceIP) (count_over_time({job=\\\"fluentbit-antrea-netpolicy\\\",
      action=~\\\"Drop|Reject\\\"} | json | __error__=`` | sourceIP =~\\\".*$sourceIP_filter\\\"
      and destinationIP =~\\\".*$destinationIP_filter\\\" [$__range])))\",\n          \"hide\":
      false,\n          \"key\": \"Q-5d318bbe-e13a-4cae-b47f-136f27a234e2-0\",\n          \"legendFormat\":
      \"{{sourceIP}}\",\n          \"queryType\": \"range\",\n          \"refId\":
      \"A\"\n        }\n      ],\n      \"title\": \"Top Denied SourceIP\",\n      \"transformations\":
      [\n        {\n          \"id\": \"filterFieldsByName\",\n          \"options\":
      {\n            \"include\": {\n              \"names\": [\n                \"Time\",\n
      \               \"10.34.2.24\",\n                \"Value\"\n              ]\n
      \           }\n          }\n        }\n      ],\n      \"type\": \"bargauge\"\n
      \   },\n    {\n      \"datasource\": {\n        \"type\": \"loki\",\n        \"uid\":
      \"loki\"\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\":
      {\n            \"mode\": \"continuous-RdYlGr\"\n          },\n          \"displayName\":
      \"${__series.name}\",\n          \"mappings\": [],\n          \"thresholds\":
      {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n
      \               \"color\": \"green\"\n              },\n              {\n                \"color\":
      \"red\",\n                \"value\": 80\n              }\n            ]\n          }\n
      \       },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\":
      5,\n        \"w\": 11,\n        \"x\": 12,\n        \"y\": 48\n      },\n      \"id\":
      18,\n      \"options\": {\n        \"displayMode\": \"gradient\",\n        \"minVizHeight\":
      10,\n        \"minVizWidth\": 0,\n        \"orientation\": \"horizontal\",\n
      \       \"reduceOptions\": {\n          \"calcs\": [\n            \"lastNotNull\"\n
      \         ],\n          \"fields\": \"\",\n          \"values\": false\n        },\n
      \       \"showUnfilled\": true\n      },\n      \"pluginVersion\": \"9.4.3\",\n
      \     \"targets\": [\n        {\n          \"datasource\": {\n            \"type\":
      \"loki\",\n            \"uid\": \"loki\"\n          },\n          \"editorMode\":
      \"code\",\n          \"expr\": \"topk(2, sum by (destinationIP) (count_over_time({job=\\\"fluentbit-antrea-netpolicy\\\",
      action=~\\\"Drop|Reject\\\"} | json | __error__=`` | sourceIP =~\\\".*$sourceIP_filter\\\"
      and destinationIP =~\\\".*$destinationIP_filter\\\" [$__range])))\",\n          \"hide\":
      false,\n          \"key\": \"Q-5d318bbe-e13a-4cae-b47f-136f27a234e2-0\",\n          \"legendFormat\":
      \"{{destinationIP}}\",\n          \"queryType\": \"range\",\n          \"refId\":
      \"A\"\n        }\n      ],\n      \"title\": \"Top Denied DestinationIP\",\n
      \     \"transformations\": [\n        {\n          \"id\": \"filterFieldsByName\",\n
      \         \"options\": {\n            \"include\": {\n              \"names\":
      [\n                \"Time\",\n                \"10.34.2.24\",\n                \"Value\"\n
      \             ]\n            }\n          }\n        }\n      ],\n      \"type\":
      \"bargauge\"\n    },\n    {\n      \"datasource\": {\n        \"type\": \"loki\",\n
      \       \"uid\": \"loki\"\n      },\n      \"fieldConfig\": {\n        \"defaults\":
      {\n          \"color\": {\n            \"mode\": \"palette-classic\"\n          },\n
      \         \"custom\": {\n            \"hideFrom\": {\n              \"legend\":
      false,\n              \"tooltip\": false,\n              \"viz\": false\n            }\n
      \         },\n          \"displayName\": \"${__series.name}\",\n          \"mappings\":
      [],\n          \"unit\": \"hits\"\n        },\n        \"overrides\": []\n      },\n
      \     \"gridPos\": {\n        \"h\": 9,\n        \"w\": 12,\n        \"x\":
      0,\n        \"y\": 49\n      },\n      \"id\": 28,\n      \"options\": {\n        \"displayLabels\":
      [\n          \"percent\"\n        ],\n        \"legend\": {\n          \"displayMode\":
      \"list\",\n          \"placement\": \"right\",\n          \"showLegend\": true,\n
      \         \"values\": []\n        },\n        \"pieType\": \"donut\",\n        \"reduceOptions\":
      {\n          \"calcs\": [\n            \"lastNotNull\"\n          ],\n          \"fields\":
      \"\",\n          \"values\": false\n        },\n        \"tooltip\": {\n          \"mode\":
      \"single\",\n          \"sort\": \"none\"\n        }\n      },\n      \"pluginVersion\":
      \"9.3.1\",\n      \"targets\": [\n        {\n          \"datasource\": {\n            \"type\":
      \"loki\",\n            \"uid\": \"loki\"\n          },\n          \"editorMode\":
      \"code\",\n          \"expr\": \"sum by (destinationPort, protocol, action)
      (count_over_time({job=\\\"fluentbit-antrea-netpolicy\\\", action=~\\\"Reject|Drop\\\"}
      | json | __error__=`` | sourceIP =~\\\".*$sourceIP_filter\\\" and destinationIP
      =~\\\".*$destinationIP_filter\\\" [$__range]))\",\n          \"hide\": false,\n
      \         \"key\": \"Q-5d318bbe-e13a-4cae-b47f-136f27a234e2-0\",\n          \"legendFormat\":
      \"{{destinationIP}}\",\n          \"queryType\": \"range\",\n          \"refId\":
      \"A\"\n        }\n      ],\n      \"title\": \"Denied Services\",\n      \"transformations\":
      [\n        {\n          \"id\": \"renameByRegex\",\n          \"options\": {\n
      \           \"regex\": \".*action=\\\"(.*)\\\".*Port=\\\"(.*)\\\",.*\\\"(.*)\\\".*\",\n
      \           \"renamePattern\": \"$1 - $2 - $3\"\n          }\n        }\n      ],\n
      \     \"type\": \"piechart\"\n    },\n    {\n      \"datasource\": {\n        \"type\":
      \"loki\",\n        \"uid\": \"loki\"\n      },\n      \"fieldConfig\": {\n        \"defaults\":
      {\n          \"color\": {\n            \"mode\": \"continuous-GrYlRd\"\n          },\n
      \         \"displayName\": \"${__series.name}\",\n          \"mappings\": [],\n
      \         \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\":
      [\n              {\n                \"color\": \"green\"\n              },\n
      \             {\n                \"color\": \"red\",\n                \"value\":
      80\n              }\n            ]\n          }\n        },\n        \"overrides\":
      []\n      },\n      \"gridPos\": {\n        \"h\": 5,\n        \"w\": 11,\n
      \       \"x\": 12,\n        \"y\": 53\n      },\n      \"id\": 27,\n      \"options\":
      {\n        \"displayMode\": \"gradient\",\n        \"minVizHeight\": 10,\n        \"minVizWidth\":
      0,\n        \"orientation\": \"horizontal\",\n        \"reduceOptions\": {\n
      \         \"calcs\": [\n            \"lastNotNull\"\n          ],\n          \"fields\":
      \"\",\n          \"values\": false\n        },\n        \"showUnfilled\": true\n
      \     },\n      \"pluginVersion\": \"9.4.3\",\n      \"targets\": [\n        {\n
      \         \"datasource\": {\n            \"type\": \"loki\",\n            \"uid\":
      \"loki\"\n          },\n          \"editorMode\": \"code\",\n          \"expr\":
      \"topk(2, sum by (protocol, sourceIP, destinationIP, destinationPort) (count_over_time({job=\\\"fluentbit-antrea-netpolicy\\\",
      action=~\\\"Drop|Reject\\\"} | json | __error__=`` | sourceIP =~\\\".*$sourceIP_filter\\\"
      and destinationIP =~\\\".*$destinationIP_filter\\\" [$__range])))\",\n          \"hide\":
      false,\n          \"key\": \"Q-5d318bbe-e13a-4cae-b47f-136f27a234e2-0\",\n          \"legendFormat\":
      \"{{sourceIP}} - {{destinationIP}} {{protocol}} {{destinationPort}}\",\n          \"queryType\":
      \"range\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"title\":
      \"Top Denied Conversations\",\n      \"transformations\": [\n        {\n          \"id\":
      \"filterFieldsByName\",\n          \"options\": {\n            \"include\":
      {\n              \"names\": [\n                \"Time\",\n                \"10.34.2.24\",\n
      \               \"Value\"\n              ]\n            }\n          }\n        }\n
      \     ],\n      \"type\": \"bargauge\"\n    }\n  ],\n  \"refresh\": \"\",\n
      \ \"revision\": 1,\n  \"schemaVersion\": 38,\n  \"style\": \"dark\",\n  \"tags\":
      [\n    \"antrea_v1.10\"\n  ],\n  \"templating\": {\n    \"list\": [\n      {\n
      \       \"current\": {\n          \"selected\": false,\n          \"text\":
      [\n            \"All\"\n          ],\n          \"value\": [\n            \"$__all\"\n
      \         ]\n        },\n        \"datasource\": {\n          \"type\": \"prometheus\",\n
      \         \"uid\": \"prometheus\"\n        },\n        \"definition\": \"up{job=\\\"antrea-agents\\\"}\",\n
      \       \"hide\": 0,\n        \"includeAll\": true,\n        \"multi\": true,\n
      \       \"name\": \"instance\",\n        \"options\": [],\n        \"query\":
      {\n          \"query\": \"up{job=\\\"antrea-agents\\\"}\",\n          \"refId\":
      \"StandardVariableQuery\"\n        },\n        \"refresh\": 1,\n        \"regex\":
      \".*instance=\\\"(.*?);.*\",\n        \"skipUrlSync\": false,\n        \"sort\":
      0,\n        \"type\": \"query\"\n      },\n      {\n        \"current\": {\n
      \         \"selected\": true,\n          \"text\": [\n            \"All\"\n
      \         ],\n          \"value\": [\n            \"$__all\"\n          ]\n
      \       },\n        \"datasource\": {\n          \"type\": \"loki\",\n          \"uid\":
      \"loki\"\n        },\n        \"definition\": \"\",\n        \"hide\": 0,\n
      \       \"includeAll\": true,\n        \"multi\": true,\n        \"name\": \"action\",\n
      \       \"options\": [],\n        \"query\": {\n          \"label\": \"action\",\n
      \         \"refId\": \"LokiVariableQueryEditor-VariableQuery\",\n          \"stream\":
      \"\",\n          \"type\": 1\n        },\n        \"refresh\": 1,\n        \"regex\":
      \"\",\n        \"skipUrlSync\": false,\n        \"sort\": 0,\n        \"type\":
      \"query\"\n      },\n      {\n        \"current\": {\n          \"selected\":
      false,\n          \"text\": \"\",\n          \"value\": \"\"\n        },\n        \"hide\":
      0,\n        \"label\": \"src_IP\",\n        \"name\": \"sourceIP_filter\",\n
      \       \"options\": [\n          {\n            \"selected\": true,\n            \"text\":
      \"\",\n            \"value\": \"\"\n          }\n        ],\n        \"query\":
      \"\",\n        \"skipUrlSync\": false,\n        \"type\": \"textbox\"\n      },\n
      \     {\n        \"current\": {\n          \"selected\": false,\n          \"text\":
      \"\",\n          \"value\": \"\"\n        },\n        \"hide\": 0,\n        \"label\":
      \"dest_IP\",\n        \"name\": \"destinationIP_filter\",\n        \"options\":
      [\n          {\n            \"selected\": true,\n            \"text\": \"\",\n
      \           \"value\": \"\"\n          }\n        ],\n        \"query\": \"\",\n
      \       \"skipUrlSync\": false,\n        \"type\": \"textbox\"\n      }\n    ]\n
      \ },\n  \"time\": {\n    \"from\": \"now-1h\",\n    \"to\": \"now\"\n  },\n
      \ \"timepicker\": {},\n  \"timezone\": \"\",\n  \"title\": \"4.- Agent Network
      Policy Metrics and Logs\",\n  \"uid\": \"ICIWcK0Vz\",\n  \"version\": 1,\n  \"weekStart\":
      \"\"\n}"
  kind: ConfigMap
  metadata:
    labels:
      grafana_dashboard: "1"
    name: 4-agent-network-policy-metrics-and-logs-dashboard-cm
    namespace: observability
- apiVersion: v1
  data:
    5-antrea-agent-logs.json: |-
      {
        "annotations": {
          "list": [
            {
              "builtIn": 1,
              "datasource": {
                "type": "grafana",
                "uid": "-- Grafana --"
              },
              "enable": true,
              "hide": true,
              "iconColor": "rgba(0, 211, 255, 1)",
              "name": "Annotations & Alerts",
              "target": {
                "limit": 100,
                "matchAny": false,
                "tags": [],
                "type": "dashboard"
              },
              "type": "dashboard"
            }
          ]
        },
        "editable": true,
        "fiscalYearStartMonth": 0,
        "graphTooltip": 0,
        "links": [
          {
            "asDropdown": false,
            "icon": "external link",
            "includeVars": true,
            "keepTime": true,
            "tags": [],
            "targetBlank": true,
            "title": "Antrea Dashboards",
            "tooltip": "",
            "type": "dashboards",
            "url": ""
          }
        ],
        "liveNow": false,
        "panels": [
          {
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "percentage",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "orange",
                      "value": 70
                    },
                    {
                      "color": "red",
                      "value": 85
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 5,
              "x": 0,
              "y": 0
            },
            "id": 5,
            "options": {
              "displayMode": "gradient",
              "minVizHeight": 10,
              "minVizWidth": 0,
              "orientation": "horizontal",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showUnfilled": true
            },
            "pluginVersion": "9.4.3",
            "targets": [
              {
                "datasource": {
                  "type": "loki",
                  "uid": "loki"
                },
                "editorMode": "code",
                "expr": "sum by (nodename) (count_over_time({job=\"fluentbit-antrea\", nodename=~\"$instance\", agent_log_category=~\"$log_category\", log_level=~\"$log_level\"} [$__range]))",
                "legendFormat": "{{log_level}}",
                "queryType": "range",
                "refId": "A"
              }
            ],
            "title": "Antrea Logs by Node",
            "transformations": [],
            "type": "bargauge"
          },
          {
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  }
                },
                "mappings": []
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 5,
              "x": 5,
              "y": 0
            },
            "id": 3,
            "options": {
              "displayLabels": [
                "name"
              ],
              "legend": {
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "pieType": "donut",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "tooltip": {
                "mode": "multi",
                "sort": "asc"
              }
            },
            "pluginVersion": "9.3.1",
            "targets": [
              {
                "datasource": {
                  "type": "loki",
                  "uid": "loki"
                },
                "editorMode": "code",
                "expr": "sum by (log_level) (count_over_time({job=\"fluentbit-antrea\", nodename=~\"$instance\", agent_log_category=~\"$log_category\", log_level=~\"$log_level\"} [$__range]))",
                "legendFormat": "{{log_level}}",
                "queryType": "range",
                "refId": "A"
              }
            ],
            "title": "Agent Logs by log level",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "^E$",
                  "renamePattern": "ERROR"
                }
              },
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "^I$",
                  "renamePattern": "INFO"
                }
              },
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "^W$",
                  "renamePattern": "WARNING"
                }
              }
            ],
            "type": "piechart"
          },
          {
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "fieldConfig": {
              "defaults": {
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 2,
              "x": 10,
              "y": 0
            },
            "id": 4,
            "options": {
              "colorMode": "background",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "9.4.3",
            "targets": [
              {
                "datasource": {
                  "type": "loki",
                  "uid": "loki"
                },
                "editorMode": "code",
                "expr": "sum(bytes_over_time({job=\"fluentbit-antrea\", nodename=~\"$instance\", agent_log_category=~\"$log_category\", log_level=~\"$log_level\"}[$__range]))",
                "queryType": "range",
                "refId": "A"
              }
            ],
            "title": "Agent Logs in Bytes",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 11,
              "x": 12,
              "y": 0
            },
            "id": 7,
            "options": {
              "colorMode": "background",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "9.4.3",
            "targets": [
              {
                "datasource": {
                  "type": "loki",
                  "uid": "loki"
                },
                "editorMode": "code",
                "expr": "sum by(agent_log_category) (count_over_time({job=\"fluentbit-antrea\", nodename=~\"$instance\", agent_log_category=~\"$log_category\", log_level=~\"$log_level\"} [$__range]))",
                "legendFormat": "{{category}}",
                "queryType": "range",
                "refId": "A"
              }
            ],
            "title": "Agent Logs count by Category",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "events",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "bars",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "smooth",
                  "lineWidth": 1,
                  "pointSize": 4,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 12,
              "x": 0,
              "y": 7
            },
            "id": 9,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "right",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.3.1",
            "targets": [
              {
                "datasource": {
                  "type": "loki",
                  "uid": "loki"
                },
                "editorMode": "code",
                "expr": "sum by (agent_log_category, log_level) (count_over_time({job=\"fluentbit-antrea\", nodename=~\"$instance\", agent_log_category=~\"$log_category\", log_level=~\"$log_level\" } | json  [$__range]))",
                "hide": false,
                "legendFormat": "{{log_level}} {{agent_log_category}} ",
                "queryType": "range",
                "refId": "C"
              }
            ],
            "title": "Antrea Log Count Time Series by Category and Log Level",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(^W)(.*)",
                  "renamePattern": "WARNING $2"
                }
              },
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(^E)(.*)",
                  "renamePattern": "ERROR $2"
                }
              },
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(^I)(.*)",
                  "renamePattern": "INFO $2"
                }
              }
            ],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "events per second",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "points",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "smooth",
                  "lineWidth": 1,
                  "pointSize": 4,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 11,
              "x": 12,
              "y": 7
            },
            "id": 10,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "mean",
                  "max"
                ],
                "displayMode": "table",
                "placement": "right",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.3.1",
            "targets": [
              {
                "datasource": {
                  "type": "loki",
                  "uid": "loki"
                },
                "editorMode": "code",
                "expr": "sum(rate({job=\"fluentbit-antrea\", nodename=~\"$instance\", agent_log_category=~\"$log_category\", log_level=~\"$log_level\"} [1m])) by (log_level)",
                "hide": false,
                "legendFormat": "{{log_level}} {{category}} ",
                "queryType": "range",
                "refId": "C"
              }
            ],
            "title": "Antrea Rate Events per Second",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(^W)(.*)",
                  "renamePattern": "WARNING $2"
                }
              },
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(^E)(.*)",
                  "renamePattern": "ERROR $2"
                }
              },
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(^I)(.*)",
                  "renamePattern": "INFO $2"
                }
              }
            ],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "gridPos": {
              "h": 12,
              "w": 23,
              "x": 0,
              "y": 14
            },
            "id": 2,
            "options": {
              "dedupStrategy": "numbers",
              "enableLogDetails": true,
              "prettifyLogMessage": true,
              "showCommonLabels": false,
              "showLabels": false,
              "showTime": true,
              "sortOrder": "Descending",
              "wrapLogMessage": false
            },
            "targets": [
              {
                "datasource": {
                  "type": "loki",
                  "uid": "loki"
                },
                "editorMode": "code",
                "expr": "{job=\"fluentbit-antrea\", nodename=~\"$instance\", agent_log_category=~\"$log_category\", log_level=~\"$log_level\" } | json | line_format `{{.timestamp}} at node {{.nodename}} with level {{.log_level}} from subsystem {{.agent_log_category}} with message: {{.message}}`",
                "queryType": "range",
                "refId": "A"
              }
            ],
            "title": "Antrea Logs",
            "type": "logs"
          }
        ],
        "refresh": "",
        "revision": 1,
        "schemaVersion": 38,
        "style": "dark",
        "tags": [
          "antrea_v1.10"
        ],
        "templating": {
          "list": [
            {
              "current": {
                "selected": false,
                "text": [
                  "All"
                ],
                "value": [
                  "$__all"
                ]
              },
              "datasource": {
                "type": "loki",
                "uid": "loki"
              },
              "definition": "",
              "hide": 0,
              "includeAll": true,
              "multi": true,
              "name": "instance",
              "options": [],
              "query": {
                "label": "nodename",
                "refId": "LokiVariableQueryEditor-VariableQuery",
                "stream": "",
                "type": 1
              },
              "refresh": 1,
              "regex": "",
              "skipUrlSync": false,
              "sort": 0,
              "type": "query"
            },
            {
              "current": {
                "selected": false,
                "text": [
                  "All"
                ],
                "value": [
                  "$__all"
                ]
              },
              "datasource": {
                "type": "loki",
                "uid": "loki"
              },
              "definition": "",
              "hide": 0,
              "includeAll": true,
              "multi": true,
              "name": "log_level",
              "options": [],
              "query": {
                "label": "log_level",
                "refId": "LokiVariableQueryEditor-VariableQuery",
                "stream": "",
                "type": 1
              },
              "refresh": 1,
              "regex": "",
              "skipUrlSync": false,
              "sort": 0,
              "type": "query"
            },
            {
              "allValue": "",
              "current": {
                "selected": false,
                "text": [
                  "All"
                ],
                "value": [
                  "$__all"
                ]
              },
              "datasource": {
                "type": "loki",
                "uid": "loki"
              },
              "definition": "",
              "hide": 0,
              "includeAll": true,
              "multi": true,
              "name": "log_category",
              "options": [],
              "query": {
                "label": "agent_log_category",
                "refId": "LokiVariableQueryEditor-VariableQuery",
                "stream": "",
                "type": 1
              },
              "refresh": 1,
              "regex": "",
              "skipUrlSync": false,
              "sort": 0,
              "type": "query"
            }
          ]
        },
        "time": {
          "from": "now-1h",
          "to": "now"
        },
        "timepicker": {},
        "timezone": "",
        "title": "5.- Antrea Agent Logs",
        "uid": "6cgVcKAVz",
        "version": 1,
        "weekStart": ""
      }
  kind: ConfigMap
  metadata:
    labels:
      grafana_dashboard: "1"
    name: 5-antrea-agent-logs-dashboard-cm
    namespace: observability
- apiVersion: v1
  data:
    6-controller-metrics-and-logs.json: |-
      {
        "annotations": {
          "list": [
            {
              "builtIn": 1,
              "datasource": {
                "type": "grafana",
                "uid": "-- Grafana --"
              },
              "enable": true,
              "hide": true,
              "iconColor": "rgba(0, 211, 255, 1)",
              "name": "Annotations & Alerts",
              "target": {
                "limit": 100,
                "matchAny": false,
                "tags": [],
                "type": "dashboard"
              },
              "type": "dashboard"
            }
          ]
        },
        "editable": true,
        "fiscalYearStartMonth": 0,
        "graphTooltip": 0,
        "links": [
          {
            "asDropdown": false,
            "icon": "external link",
            "includeVars": true,
            "keepTime": true,
            "tags": [
              "antrea_v1.10"
            ],
            "targetBlank": true,
            "title": "Antrea Dashboards",
            "tooltip": "",
            "type": "dashboards",
            "url": ""
          }
        ],
        "liveNow": false,
        "panels": [
          {
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  }
                },
                "mappings": []
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 5,
              "x": 0,
              "y": 0
            },
            "id": 32,
            "options": {
              "displayLabels": [
                "name"
              ],
              "legend": {
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "pieType": "donut",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "tooltip": {
                "mode": "multi",
                "sort": "asc"
              }
            },
            "pluginVersion": "9.3.1",
            "targets": [
              {
                "datasource": {
                  "type": "loki",
                  "uid": "loki"
                },
                "editorMode": "code",
                "expr": "sum by (log_level) (count_over_time({job=\"fluentbit-antrea-controller\", nodename=~\"$instance\", controller_log_category=~\"$log_category\", log_level=~\"$log_level\"} [$__range]))",
                "legendFormat": "{{log_level}}",
                "queryType": "range",
                "refId": "A"
              }
            ],
            "title": "Agent Logs by log level",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "^E$",
                  "renamePattern": "ERROR"
                }
              },
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "^I$",
                  "renamePattern": "INFO"
                }
              },
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "^W$",
                  "renamePattern": "WARNING"
                }
              }
            ],
            "type": "piechart"
          },
          {
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 5,
              "x": 5,
              "y": 0
            },
            "id": 34,
            "options": {
              "colorMode": "background",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "9.4.3",
            "targets": [
              {
                "datasource": {
                  "type": "loki",
                  "uid": "loki"
                },
                "editorMode": "code",
                "expr": "sum by(controller_log_category) (count_over_time({job=\"fluentbit-antrea-controller\", nodename=~\"$instance\", controller_log_category=~\"$log_category\", log_level=~\"$log_level\"} [$__range]))",
                "legendFormat": "{{category}}",
                "queryType": "range",
                "refId": "A"
              }
            ],
            "title": "Agent Logs count by Category",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-YlBl"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "logs per second",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "scheme",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "smooth",
                  "lineWidth": 1,
                  "pointSize": 4,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 13,
              "x": 10,
              "y": 0
            },
            "id": 7,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "mean",
                  "max"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "9.3.1",
            "targets": [
              {
                "datasource": {
                  "type": "loki",
                  "uid": "loki"
                },
                "editorMode": "code",
                "expr": "sum (rate({job=\"fluentbit-antrea-controller\", nodename=~\"$instance\", controller_log_category=~\"$log_category\", log_level=~\"$log_level\"} [1m])) by (log_level)",
                "hide": false,
                "legendFormat": "{{log_level}} {{category}} ",
                "queryType": "range",
                "refId": "C"
              }
            ],
            "title": "Antrea Controller Logs per Second",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(^W)(.*)",
                  "renamePattern": "WARNING $2"
                }
              },
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(^E)(.*)",
                  "renamePattern": "ERROR $2"
                }
              },
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(^I)(.*)",
                  "renamePattern": "INFO $2"
                }
              }
            ],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 5,
              "x": 0,
              "y": 7
            },
            "id": 19,
            "options": {
              "displayMode": "lcd",
              "minVizHeight": 10,
              "minVizWidth": 0,
              "orientation": "horizontal",
              "reduceOptions": {
                "calcs": [
                  "mean"
                ],
                "fields": "",
                "values": false
              },
              "showUnfilled": false
            },
            "pluginVersion": "9.4.3",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "antrea_controller_length_address_group_queue",
                "legendFormat": "Address Group Queue",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "antrea_controller_length_network_policy_queue",
                "hide": false,
                "legendFormat": "Network Policy Queue",
                "range": true,
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "antrea_controller_length_applied_to_group_queue",
                "hide": false,
                "legendFormat": "Applied To Queue",
                "range": true,
                "refId": "C"
              }
            ],
            "title": "Queue Lenght",
            "type": "bargauge"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {
                "custom": {
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "scaleDistribution": {
                    "type": "linear"
                  }
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 5,
              "x": 5,
              "y": 7
            },
            "id": 30,
            "options": {
              "calculate": false,
              "cellGap": 1,
              "color": {
                "exponent": 0.5,
                "fill": "dark-orange",
                "mode": "scheme",
                "reverse": false,
                "scale": "exponential",
                "scheme": "Oranges",
                "steps": 64
              },
              "exemplars": {
                "color": "rgba(255,0,255,0.7)"
              },
              "filterValues": {
                "le": 1e-9
              },
              "legend": {
                "show": true
              },
              "rowsFrame": {
                "layout": "auto"
              },
              "tooltip": {
                "show": true,
                "yHistogram": false
              },
              "yAxis": {
                "axisPlacement": "left",
                "reverse": false
              }
            },
            "pluginVersion": "9.4.3",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "up{job=\"antrea-controllers\", instance=~\"^$instance.*\"}",
                "legendFormat": "__auto",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Nodes Running Antrea Controller",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(.*)instance=\"(.*);(.*)",
                  "renamePattern": "up @ $2"
                }
              }
            ],
            "type": "heatmap"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "Total user and system CPU time spent in seconds.",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "CPU Usage",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 33,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byName",
                    "options": "antrea-controller @ k8s-worker-03"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "orange",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 7,
              "w": 13,
              "x": 10,
              "y": 7
            },
            "id": 21,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "rate(process_cpu_seconds_total{job=\"antrea-controllers\"}[60s]) * 100",
                "legendFormat": "__auto",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Controller Process CPU Seconds",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(.*)instance=\"(.*);(.*)",
                  "renamePattern": "antrea-controller @ $2"
                }
              },
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(.*)job=\"(.*)\".*",
                  "renamePattern": "$2"
                }
              }
            ],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 25,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "ms"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Network Policy Sync Duration (msec)"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "red",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Applied-to-Group Sync Duration (msec)"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "blue",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 9,
              "w": 8,
              "x": 0,
              "y": 14
            },
            "id": 25,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "min",
                  "max",
                  "mean"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "irate(antrea_controller_network_policy_sync_duration_milliseconds_sum[1m])",
                "hide": false,
                "legendFormat": "Network Policy Sync Duration (msec)",
                "range": true,
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "irate(antrea_controller_address_group_sync_duration_milliseconds_sum[1m])",
                "hide": false,
                "legendFormat": "Address Group Sync Duration (msec)",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "rate(antrea_controller_applied_to_group_sync_duration_milliseconds_sum[1m])",
                "hide": false,
                "legendFormat": "Applied-to-Group Sync Duration (msec)",
                "range": true,
                "refId": "C"
              }
            ],
            "title": "Controller Sync Duration",
            "transparent": true,
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "antrea_controller_address_group_processed: The total number of address-group processed\n\nantrea_controller_applied_to_group_processed: The total number of applied-to-group processed\n\nantrea_controller_network_policy_processed: The total number of internal-networkpolicy processed",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "Processed Policies Rate",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "bars",
                  "fillOpacity": 25,
                  "gradientMode": "opacity",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineStyle": {
                    "fill": "solid"
                  },
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Network Policy Processed"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "red",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Applied-to-Group Processed"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "blue",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Address Groups Processed"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "yellow",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 9,
              "w": 7,
              "x": 8,
              "y": 14
            },
            "id": 27,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "min",
                  "max",
                  "mean"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "irate(antrea_controller_network_policy_processed[1m])",
                "legendFormat": "Network Policy Processed",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "irate(antrea_controller_applied_to_group_processed[1m])",
                "hide": false,
                "legendFormat": "Applied-to-Group Processed",
                "range": true,
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "irate(antrea_controller_address_group_processed[1m])",
                "hide": false,
                "legendFormat": "Address Groups Processed",
                "range": true,
                "refId": "C"
              }
            ],
            "title": "Controller Processed Rate",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "antrea_controller_acnp_status_updates: The total number of actual status updates performed for Antrea ClusterNetworkPolicy Custom Resources\n\nantrea_controller_anp_status_updates: The total number of actual status updates performed for Antrea NetworkPolicy Custom Resources",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "updates per second",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 25,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byName",
                    "options": "ACNP Status Update"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "blue",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "ANP Status Update"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#C0D8FF",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 9,
              "w": 8,
              "x": 15,
              "y": 14
            },
            "id": 23,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "min",
                  "max",
                  "mean"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "pluginVersion": "9.2.4",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "irate(antrea_controller_acnp_status_updates[1m])",
                "legendFormat": "ACNP Status Update",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "irate(antrea_controller_anp_status_updates[1m])",
                "hide": false,
                "legendFormat": "ANP Status Update",
                "range": true,
                "refId": "B"
              }
            ],
            "title": "ANP and ACNP Status Update Rate",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(.*)\\s(.*);(.*)",
                  "renamePattern": "$1"
                }
              }
            ],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "gridPos": {
              "h": 13,
              "w": 23,
              "x": 0,
              "y": 23
            },
            "id": 29,
            "options": {
              "dedupStrategy": "numbers",
              "enableLogDetails": true,
              "prettifyLogMessage": true,
              "showCommonLabels": false,
              "showLabels": false,
              "showTime": true,
              "sortOrder": "Descending",
              "wrapLogMessage": false
            },
            "targets": [
              {
                "datasource": {
                  "type": "loki",
                  "uid": "loki"
                },
                "editorMode": "code",
                "expr": "{job=\"fluentbit-antrea-controller\", nodename=~\"$instance\", controller_log_category=~\"$log_category\", log_level=~\"$log_level\" } | json | line_format `{{.timestamp}} at node {{.nodename}} with level {{.log_level}} from subsystem {{.category}} with message: {{.message}}`",
                "queryType": "range",
                "refId": "A"
              }
            ],
            "title": "Antrea Controller Logs",
            "type": "logs"
          }
        ],
        "refresh": "",
        "revision": 1,
        "schemaVersion": 38,
        "style": "dark",
        "tags": [
          "antrea_v1.10"
        ],
        "templating": {
          "list": [
            {
              "current": {
                "selected": false,
                "text": [
                  "All"
                ],
                "value": [
                  "$__all"
                ]
              },
              "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
              },
              "definition": "up{job=\"antrea-controllers\"}",
              "hide": 0,
              "includeAll": true,
              "multi": true,
              "name": "instance",
              "options": [],
              "query": {
                "query": "up{job=\"antrea-controllers\"}",
                "refId": "StandardVariableQuery"
              },
              "refresh": 1,
              "regex": ".*instance=\"(.*?);.*",
              "skipUrlSync": false,
              "sort": 0,
              "type": "query"
            },
            {
              "current": {
                "selected": false,
                "text": [
                  "All"
                ],
                "value": [
                  "$__all"
                ]
              },
              "datasource": {
                "type": "loki",
                "uid": "loki"
              },
              "definition": "",
              "hide": 0,
              "includeAll": true,
              "multi": true,
              "name": "log_category",
              "options": [],
              "query": {
                "label": "controller_log_category",
                "refId": "LokiVariableQueryEditor-VariableQuery",
                "stream": "",
                "type": 1
              },
              "refresh": 1,
              "regex": "",
              "skipUrlSync": false,
              "sort": 0,
              "type": "query"
            },
            {
              "current": {
                "selected": false,
                "text": [
                  "All"
                ],
                "value": [
                  "$__all"
                ]
              },
              "datasource": {
                "type": "loki",
                "uid": "loki"
              },
              "definition": "",
              "hide": 0,
              "includeAll": true,
              "multi": true,
              "name": "log_level",
              "options": [],
              "query": {
                "label": "log_level",
                "refId": "LokiVariableQueryEditor-VariableQuery",
                "stream": "",
                "type": 1
              },
              "refresh": 1,
              "regex": "",
              "skipUrlSync": false,
              "sort": 0,
              "type": "query"
            }
          ]
        },
        "time": {
          "from": "now-1h",
          "to": "now"
        },
        "timepicker": {},
        "timezone": "",
        "title": "6.- Controller Metrics and Logs",
        "uid": "4XYIcFA4k",
        "version": 1,
        "weekStart": ""
      }
  kind: ConfigMap
  metadata:
    labels:
      grafana_dashboard: "1"
    name: 6-controller-metrics-and-logs-dashboard-cm
    namespace: observability
kind: List
metadata:
